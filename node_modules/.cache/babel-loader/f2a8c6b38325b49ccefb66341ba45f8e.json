{"ast":null,"code":"\"use strict\"; //See: https://github.com/ethereum/wiki/wiki/RLP\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar bytes_1 = require(\"./bytes\");\n\nfunction arrayifyInteger(value) {\n  var result = [];\n\n  while (value) {\n    result.unshift(value & 0xff);\n    value >>= 8;\n  }\n\n  return result;\n}\n\nfunction unarrayifyInteger(data, offset, length) {\n  var result = 0;\n\n  for (var i = 0; i < length; i++) {\n    result = result * 256 + data[offset + i];\n  }\n\n  return result;\n}\n\nfunction _encode(object) {\n  if (Array.isArray(object)) {\n    var payload = [];\n    object.forEach(function (child) {\n      payload = payload.concat(_encode(child));\n    });\n\n    if (payload.length <= 55) {\n      payload.unshift(0xc0 + payload.length);\n      return payload;\n    }\n\n    var length = arrayifyInteger(payload.length);\n    length.unshift(0xf7 + length.length);\n    return length.concat(payload);\n  }\n\n  var data = Array.prototype.slice.call(bytes_1.arrayify(object));\n\n  if (data.length === 1 && data[0] <= 0x7f) {\n    return data;\n  } else if (data.length <= 55) {\n    data.unshift(0x80 + data.length);\n    return data;\n  }\n\n  var length = arrayifyInteger(data.length);\n  length.unshift(0xb7 + length.length);\n  return length.concat(data);\n}\n\nfunction encode(object) {\n  return bytes_1.hexlify(_encode(object));\n}\n\nexports.encode = encode;\n\nfunction _decodeChildren(data, offset, childOffset, length) {\n  var result = [];\n\n  while (childOffset < offset + 1 + length) {\n    var decoded = _decode(data, childOffset);\n\n    result.push(decoded.result);\n    childOffset += decoded.consumed;\n\n    if (childOffset > offset + 1 + length) {\n      throw new Error('invalid rlp');\n    }\n  }\n\n  return {\n    consumed: 1 + length,\n    result: result\n  };\n} // returns { consumed: number, result: Object }\n\n\nfunction _decode(data, offset) {\n  if (data.length === 0) {\n    throw new Error('invalid rlp data');\n  } // Array with extra length prefix\n\n\n  if (data[offset] >= 0xf8) {\n    var lengthLength = data[offset] - 0xf7;\n\n    if (offset + 1 + lengthLength > data.length) {\n      throw new Error('too short');\n    }\n\n    var length = unarrayifyInteger(data, offset + 1, lengthLength);\n\n    if (offset + 1 + lengthLength + length > data.length) {\n      throw new Error('to short');\n    }\n\n    return _decodeChildren(data, offset, offset + 1 + lengthLength, lengthLength + length);\n  } else if (data[offset] >= 0xc0) {\n    var length = data[offset] - 0xc0;\n\n    if (offset + 1 + length > data.length) {\n      throw new Error('invalid rlp data');\n    }\n\n    return _decodeChildren(data, offset, offset + 1, length);\n  } else if (data[offset] >= 0xb8) {\n    var lengthLength = data[offset] - 0xb7;\n\n    if (offset + 1 + lengthLength > data.length) {\n      throw new Error('invalid rlp data');\n    }\n\n    var length = unarrayifyInteger(data, offset + 1, lengthLength);\n\n    if (offset + 1 + lengthLength + length > data.length) {\n      throw new Error('invalid rlp data');\n    }\n\n    var result = bytes_1.hexlify(data.slice(offset + 1 + lengthLength, offset + 1 + lengthLength + length));\n    return {\n      consumed: 1 + lengthLength + length,\n      result: result\n    };\n  } else if (data[offset] >= 0x80) {\n    var length = data[offset] - 0x80;\n\n    if (offset + 1 + length > data.length) {\n      throw new Error('invalid rlp data');\n    }\n\n    var result = bytes_1.hexlify(data.slice(offset + 1, offset + 1 + length));\n    return {\n      consumed: 1 + length,\n      result: result\n    };\n  }\n\n  return {\n    consumed: 1,\n    result: bytes_1.hexlify(data[offset])\n  };\n}\n\nfunction decode(data) {\n  var bytes = bytes_1.arrayify(data);\n\n  var decoded = _decode(bytes, 0);\n\n  if (decoded.consumed !== bytes.length) {\n    throw new Error('invalid rlp data');\n  }\n\n  return decoded.result;\n}\n\nexports.decode = decode;","map":{"version":3,"sources":["/home/luc1d/Code/Github/waviii.io/node_modules/ethers/utils/rlp.js"],"names":["Object","defineProperty","exports","value","bytes_1","require","arrayifyInteger","result","unshift","unarrayifyInteger","data","offset","length","i","_encode","object","Array","isArray","payload","forEach","child","concat","prototype","slice","call","arrayify","encode","hexlify","_decodeChildren","childOffset","decoded","_decode","push","consumed","Error","lengthLength","decode","bytes"],"mappings":"AAAA,a,CACA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,SAASC,eAAT,CAAyBH,KAAzB,EAAgC;AAC5B,MAAII,MAAM,GAAG,EAAb;;AACA,SAAOJ,KAAP,EAAc;AACVI,IAAAA,MAAM,CAACC,OAAP,CAAeL,KAAK,GAAG,IAAvB;AACAA,IAAAA,KAAK,KAAK,CAAV;AACH;;AACD,SAAOI,MAAP;AACH;;AACD,SAASE,iBAAT,CAA2BC,IAA3B,EAAiCC,MAAjC,EAAyCC,MAAzC,EAAiD;AAC7C,MAAIL,MAAM,GAAG,CAAb;;AACA,OAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4BC,CAAC,EAA7B,EAAiC;AAC7BN,IAAAA,MAAM,GAAIA,MAAM,GAAG,GAAV,GAAiBG,IAAI,CAACC,MAAM,GAAGE,CAAV,CAA9B;AACH;;AACD,SAAON,MAAP;AACH;;AACD,SAASO,OAAT,CAAiBC,MAAjB,EAAyB;AACrB,MAAIC,KAAK,CAACC,OAAN,CAAcF,MAAd,CAAJ,EAA2B;AACvB,QAAIG,OAAO,GAAG,EAAd;AACAH,IAAAA,MAAM,CAACI,OAAP,CAAe,UAAUC,KAAV,EAAiB;AAC5BF,MAAAA,OAAO,GAAGA,OAAO,CAACG,MAAR,CAAeP,OAAO,CAACM,KAAD,CAAtB,CAAV;AACH,KAFD;;AAGA,QAAIF,OAAO,CAACN,MAAR,IAAkB,EAAtB,EAA0B;AACtBM,MAAAA,OAAO,CAACV,OAAR,CAAgB,OAAOU,OAAO,CAACN,MAA/B;AACA,aAAOM,OAAP;AACH;;AACD,QAAIN,MAAM,GAAGN,eAAe,CAACY,OAAO,CAACN,MAAT,CAA5B;AACAA,IAAAA,MAAM,CAACJ,OAAP,CAAe,OAAOI,MAAM,CAACA,MAA7B;AACA,WAAOA,MAAM,CAACS,MAAP,CAAcH,OAAd,CAAP;AACH;;AACD,MAAIR,IAAI,GAAGM,KAAK,CAACM,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BpB,OAAO,CAACqB,QAAR,CAAiBV,MAAjB,CAA3B,CAAX;;AACA,MAAIL,IAAI,CAACE,MAAL,KAAgB,CAAhB,IAAqBF,IAAI,CAAC,CAAD,CAAJ,IAAW,IAApC,EAA0C;AACtC,WAAOA,IAAP;AACH,GAFD,MAGK,IAAIA,IAAI,CAACE,MAAL,IAAe,EAAnB,EAAuB;AACxBF,IAAAA,IAAI,CAACF,OAAL,CAAa,OAAOE,IAAI,CAACE,MAAzB;AACA,WAAOF,IAAP;AACH;;AACD,MAAIE,MAAM,GAAGN,eAAe,CAACI,IAAI,CAACE,MAAN,CAA5B;AACAA,EAAAA,MAAM,CAACJ,OAAP,CAAe,OAAOI,MAAM,CAACA,MAA7B;AACA,SAAOA,MAAM,CAACS,MAAP,CAAcX,IAAd,CAAP;AACH;;AACD,SAASgB,MAAT,CAAgBX,MAAhB,EAAwB;AACpB,SAAOX,OAAO,CAACuB,OAAR,CAAgBb,OAAO,CAACC,MAAD,CAAvB,CAAP;AACH;;AACDb,OAAO,CAACwB,MAAR,GAAiBA,MAAjB;;AACA,SAASE,eAAT,CAAyBlB,IAAzB,EAA+BC,MAA/B,EAAuCkB,WAAvC,EAAoDjB,MAApD,EAA4D;AACxD,MAAIL,MAAM,GAAG,EAAb;;AACA,SAAOsB,WAAW,GAAGlB,MAAM,GAAG,CAAT,GAAaC,MAAlC,EAA0C;AACtC,QAAIkB,OAAO,GAAGC,OAAO,CAACrB,IAAD,EAAOmB,WAAP,CAArB;;AACAtB,IAAAA,MAAM,CAACyB,IAAP,CAAYF,OAAO,CAACvB,MAApB;AACAsB,IAAAA,WAAW,IAAIC,OAAO,CAACG,QAAvB;;AACA,QAAIJ,WAAW,GAAGlB,MAAM,GAAG,CAAT,GAAaC,MAA/B,EAAuC;AACnC,YAAM,IAAIsB,KAAJ,CAAU,aAAV,CAAN;AACH;AACJ;;AACD,SAAO;AAAED,IAAAA,QAAQ,EAAG,IAAIrB,MAAjB;AAA0BL,IAAAA,MAAM,EAAEA;AAAlC,GAAP;AACH,C,CACD;;;AACA,SAASwB,OAAT,CAAiBrB,IAAjB,EAAuBC,MAAvB,EAA+B;AAC3B,MAAID,IAAI,CAACE,MAAL,KAAgB,CAApB,EAAuB;AACnB,UAAM,IAAIsB,KAAJ,CAAU,kBAAV,CAAN;AACH,GAH0B,CAI3B;;;AACA,MAAIxB,IAAI,CAACC,MAAD,CAAJ,IAAgB,IAApB,EAA0B;AACtB,QAAIwB,YAAY,GAAGzB,IAAI,CAACC,MAAD,CAAJ,GAAe,IAAlC;;AACA,QAAIA,MAAM,GAAG,CAAT,GAAawB,YAAb,GAA4BzB,IAAI,CAACE,MAArC,EAA6C;AACzC,YAAM,IAAIsB,KAAJ,CAAU,WAAV,CAAN;AACH;;AACD,QAAItB,MAAM,GAAGH,iBAAiB,CAACC,IAAD,EAAOC,MAAM,GAAG,CAAhB,EAAmBwB,YAAnB,CAA9B;;AACA,QAAIxB,MAAM,GAAG,CAAT,GAAawB,YAAb,GAA4BvB,MAA5B,GAAqCF,IAAI,CAACE,MAA9C,EAAsD;AAClD,YAAM,IAAIsB,KAAJ,CAAU,UAAV,CAAN;AACH;;AACD,WAAON,eAAe,CAAClB,IAAD,EAAOC,MAAP,EAAeA,MAAM,GAAG,CAAT,GAAawB,YAA5B,EAA0CA,YAAY,GAAGvB,MAAzD,CAAtB;AACH,GAVD,MAWK,IAAIF,IAAI,CAACC,MAAD,CAAJ,IAAgB,IAApB,EAA0B;AAC3B,QAAIC,MAAM,GAAGF,IAAI,CAACC,MAAD,CAAJ,GAAe,IAA5B;;AACA,QAAIA,MAAM,GAAG,CAAT,GAAaC,MAAb,GAAsBF,IAAI,CAACE,MAA/B,EAAuC;AACnC,YAAM,IAAIsB,KAAJ,CAAU,kBAAV,CAAN;AACH;;AACD,WAAON,eAAe,CAAClB,IAAD,EAAOC,MAAP,EAAeA,MAAM,GAAG,CAAxB,EAA2BC,MAA3B,CAAtB;AACH,GANI,MAOA,IAAIF,IAAI,CAACC,MAAD,CAAJ,IAAgB,IAApB,EAA0B;AAC3B,QAAIwB,YAAY,GAAGzB,IAAI,CAACC,MAAD,CAAJ,GAAe,IAAlC;;AACA,QAAIA,MAAM,GAAG,CAAT,GAAawB,YAAb,GAA4BzB,IAAI,CAACE,MAArC,EAA6C;AACzC,YAAM,IAAIsB,KAAJ,CAAU,kBAAV,CAAN;AACH;;AACD,QAAItB,MAAM,GAAGH,iBAAiB,CAACC,IAAD,EAAOC,MAAM,GAAG,CAAhB,EAAmBwB,YAAnB,CAA9B;;AACA,QAAIxB,MAAM,GAAG,CAAT,GAAawB,YAAb,GAA4BvB,MAA5B,GAAqCF,IAAI,CAACE,MAA9C,EAAsD;AAClD,YAAM,IAAIsB,KAAJ,CAAU,kBAAV,CAAN;AACH;;AACD,QAAI3B,MAAM,GAAGH,OAAO,CAACuB,OAAR,CAAgBjB,IAAI,CAACa,KAAL,CAAWZ,MAAM,GAAG,CAAT,GAAawB,YAAxB,EAAsCxB,MAAM,GAAG,CAAT,GAAawB,YAAb,GAA4BvB,MAAlE,CAAhB,CAAb;AACA,WAAO;AAAEqB,MAAAA,QAAQ,EAAG,IAAIE,YAAJ,GAAmBvB,MAAhC;AAAyCL,MAAAA,MAAM,EAAEA;AAAjD,KAAP;AACH,GAXI,MAYA,IAAIG,IAAI,CAACC,MAAD,CAAJ,IAAgB,IAApB,EAA0B;AAC3B,QAAIC,MAAM,GAAGF,IAAI,CAACC,MAAD,CAAJ,GAAe,IAA5B;;AACA,QAAIA,MAAM,GAAG,CAAT,GAAaC,MAAb,GAAsBF,IAAI,CAACE,MAA/B,EAAuC;AACnC,YAAM,IAAIsB,KAAJ,CAAU,kBAAV,CAAN;AACH;;AACD,QAAI3B,MAAM,GAAGH,OAAO,CAACuB,OAAR,CAAgBjB,IAAI,CAACa,KAAL,CAAWZ,MAAM,GAAG,CAApB,EAAuBA,MAAM,GAAG,CAAT,GAAaC,MAApC,CAAhB,CAAb;AACA,WAAO;AAAEqB,MAAAA,QAAQ,EAAG,IAAIrB,MAAjB;AAA0BL,MAAAA,MAAM,EAAEA;AAAlC,KAAP;AACH;;AACD,SAAO;AAAE0B,IAAAA,QAAQ,EAAE,CAAZ;AAAe1B,IAAAA,MAAM,EAAEH,OAAO,CAACuB,OAAR,CAAgBjB,IAAI,CAACC,MAAD,CAApB;AAAvB,GAAP;AACH;;AACD,SAASyB,MAAT,CAAgB1B,IAAhB,EAAsB;AAClB,MAAI2B,KAAK,GAAGjC,OAAO,CAACqB,QAAR,CAAiBf,IAAjB,CAAZ;;AACA,MAAIoB,OAAO,GAAGC,OAAO,CAACM,KAAD,EAAQ,CAAR,CAArB;;AACA,MAAIP,OAAO,CAACG,QAAR,KAAqBI,KAAK,CAACzB,MAA/B,EAAuC;AACnC,UAAM,IAAIsB,KAAJ,CAAU,kBAAV,CAAN;AACH;;AACD,SAAOJ,OAAO,CAACvB,MAAf;AACH;;AACDL,OAAO,CAACkC,MAAR,GAAiBA,MAAjB","sourcesContent":["\"use strict\";\n//See: https://github.com/ethereum/wiki/wiki/RLP\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bytes_1 = require(\"./bytes\");\nfunction arrayifyInteger(value) {\n    var result = [];\n    while (value) {\n        result.unshift(value & 0xff);\n        value >>= 8;\n    }\n    return result;\n}\nfunction unarrayifyInteger(data, offset, length) {\n    var result = 0;\n    for (var i = 0; i < length; i++) {\n        result = (result * 256) + data[offset + i];\n    }\n    return result;\n}\nfunction _encode(object) {\n    if (Array.isArray(object)) {\n        var payload = [];\n        object.forEach(function (child) {\n            payload = payload.concat(_encode(child));\n        });\n        if (payload.length <= 55) {\n            payload.unshift(0xc0 + payload.length);\n            return payload;\n        }\n        var length = arrayifyInteger(payload.length);\n        length.unshift(0xf7 + length.length);\n        return length.concat(payload);\n    }\n    var data = Array.prototype.slice.call(bytes_1.arrayify(object));\n    if (data.length === 1 && data[0] <= 0x7f) {\n        return data;\n    }\n    else if (data.length <= 55) {\n        data.unshift(0x80 + data.length);\n        return data;\n    }\n    var length = arrayifyInteger(data.length);\n    length.unshift(0xb7 + length.length);\n    return length.concat(data);\n}\nfunction encode(object) {\n    return bytes_1.hexlify(_encode(object));\n}\nexports.encode = encode;\nfunction _decodeChildren(data, offset, childOffset, length) {\n    var result = [];\n    while (childOffset < offset + 1 + length) {\n        var decoded = _decode(data, childOffset);\n        result.push(decoded.result);\n        childOffset += decoded.consumed;\n        if (childOffset > offset + 1 + length) {\n            throw new Error('invalid rlp');\n        }\n    }\n    return { consumed: (1 + length), result: result };\n}\n// returns { consumed: number, result: Object }\nfunction _decode(data, offset) {\n    if (data.length === 0) {\n        throw new Error('invalid rlp data');\n    }\n    // Array with extra length prefix\n    if (data[offset] >= 0xf8) {\n        var lengthLength = data[offset] - 0xf7;\n        if (offset + 1 + lengthLength > data.length) {\n            throw new Error('too short');\n        }\n        var length = unarrayifyInteger(data, offset + 1, lengthLength);\n        if (offset + 1 + lengthLength + length > data.length) {\n            throw new Error('to short');\n        }\n        return _decodeChildren(data, offset, offset + 1 + lengthLength, lengthLength + length);\n    }\n    else if (data[offset] >= 0xc0) {\n        var length = data[offset] - 0xc0;\n        if (offset + 1 + length > data.length) {\n            throw new Error('invalid rlp data');\n        }\n        return _decodeChildren(data, offset, offset + 1, length);\n    }\n    else if (data[offset] >= 0xb8) {\n        var lengthLength = data[offset] - 0xb7;\n        if (offset + 1 + lengthLength > data.length) {\n            throw new Error('invalid rlp data');\n        }\n        var length = unarrayifyInteger(data, offset + 1, lengthLength);\n        if (offset + 1 + lengthLength + length > data.length) {\n            throw new Error('invalid rlp data');\n        }\n        var result = bytes_1.hexlify(data.slice(offset + 1 + lengthLength, offset + 1 + lengthLength + length));\n        return { consumed: (1 + lengthLength + length), result: result };\n    }\n    else if (data[offset] >= 0x80) {\n        var length = data[offset] - 0x80;\n        if (offset + 1 + length > data.length) {\n            throw new Error('invalid rlp data');\n        }\n        var result = bytes_1.hexlify(data.slice(offset + 1, offset + 1 + length));\n        return { consumed: (1 + length), result: result };\n    }\n    return { consumed: 1, result: bytes_1.hexlify(data[offset]) };\n}\nfunction decode(data) {\n    var bytes = bytes_1.arrayify(data);\n    var decoded = _decode(bytes, 0);\n    if (decoded.consumed !== bytes.length) {\n        throw new Error('invalid rlp data');\n    }\n    return decoded.result;\n}\nexports.decode = decode;\n"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"'use strict';\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar isIp = require('is-ip');\n\nvar isIP = isIp;\nvar isV4 = isIp.v4;\nvar isV6 = isIp.v6; // Copied from https://github.com/indutny/node-ip/blob/master/lib/ip.js#L7\n\nvar toBuffer = function toBuffer(ip, buff, offset) {\n  offset = ~~offset;\n  var result;\n\n  if (isV4(ip)) {\n    result = buff || Buffer.alloc(offset + 4);\n    ip.split(/\\./g).map(function (byte) {\n      result[offset++] = parseInt(byte, 10) & 0xff;\n    });\n  } else if (isV6(ip)) {\n    var sections = ip.split(':', 8);\n    var i;\n\n    for (i = 0; i < sections.length; i++) {\n      var isv4 = isV4(sections[i]);\n      var v4Buffer;\n\n      if (isv4) {\n        v4Buffer = toBuffer(sections[i]);\n        sections[i] = v4Buffer.slice(0, 2).toString('hex');\n      }\n\n      if (v4Buffer && ++i < 8) {\n        sections.splice(i, 0, v4Buffer.slice(2, 4).toString('hex'));\n      }\n    }\n\n    if (sections[0] === '') {\n      while (sections.length < 8) {\n        sections.unshift('0');\n      }\n    } else if (sections[sections.length - 1] === '') {\n      while (sections.length < 8) {\n        sections.push('0');\n      }\n    } else if (sections.length < 8) {\n      for (i = 0; i < sections.length && sections[i] !== ''; i++) {\n        ;\n      }\n\n      var argv = [i, '1'];\n\n      for (i = 9 - sections.length; i > 0; i--) {\n        argv.push('0');\n      }\n\n      sections.splice.apply(sections, argv);\n    }\n\n    result = buff || Buffer.alloc(offset + 16);\n\n    for (i = 0; i < sections.length; i++) {\n      var word = parseInt(sections[i], 16);\n      result[offset++] = word >> 8 & 0xff;\n      result[offset++] = word & 0xff;\n    }\n  }\n\n  if (!result) {\n    throw Error('Invalid ip address: ' + ip);\n  }\n\n  return result;\n}; // Copied from https://github.com/indutny/node-ip/blob/master/lib/ip.js#L63\n\n\nvar toString = function toString(buff, offset, length) {\n  offset = ~~offset;\n  length = length || buff.length - offset;\n  var result = [];\n  var string;\n\n  if (length === 4) {\n    // IPv4\n    for (var i = 0; i < length; i++) {\n      result.push(buff[offset + i]);\n    }\n\n    string = result.join('.');\n  } else if (length === 16) {\n    // IPv6\n    for (var _i = 0; _i < length; _i += 2) {\n      result.push(buff.readUInt16BE(offset + _i).toString(16));\n    }\n\n    string = result.join(':');\n    string = string.replace(/(^|:)0(:0)*:0(:|$)/, '$1::$3');\n    string = string.replace(/:{3,4}/, '::');\n  }\n\n  return string;\n};\n\nmodule.exports = {\n  isIP,\n  isV4,\n  isV6,\n  toBuffer,\n  toString\n};","map":{"version":3,"sources":["/home/luc1d/Code/Github/waviii.io/node_modules/multiaddr/src/ip.js"],"names":["require","Buffer","isIp","isIP","isV4","v4","isV6","v6","toBuffer","ip","buff","offset","result","alloc","split","map","byte","parseInt","sections","i","length","isv4","v4Buffer","slice","toString","splice","unshift","push","argv","apply","word","Error","string","join","readUInt16BE","replace","module","exports"],"mappings":"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","sourcesContent":["'use strict'\n\nconst { Buffer } = require('buffer')\nconst isIp = require('is-ip')\n\nconst isIP = isIp\nconst isV4 = isIp.v4\nconst isV6 = isIp.v6\n\n// Copied from https://github.com/indutny/node-ip/blob/master/lib/ip.js#L7\nconst toBuffer = function (ip, buff, offset) {\n  offset = ~~offset\n\n  var result\n\n  if (isV4(ip)) {\n    result = buff || Buffer.alloc(offset + 4)\n    ip.split(/\\./g).map(function (byte) {\n      result[offset++] = parseInt(byte, 10) & 0xff\n    })\n  } else if (isV6(ip)) {\n    var sections = ip.split(':', 8)\n\n    var i\n    for (i = 0; i < sections.length; i++) {\n      var isv4 = isV4(sections[i])\n      var v4Buffer\n\n      if (isv4) {\n        v4Buffer = toBuffer(sections[i])\n        sections[i] = v4Buffer.slice(0, 2).toString('hex')\n      }\n\n      if (v4Buffer && ++i < 8) {\n        sections.splice(i, 0, v4Buffer.slice(2, 4).toString('hex'))\n      }\n    }\n\n    if (sections[0] === '') {\n      while (sections.length < 8) sections.unshift('0')\n    } else if (sections[sections.length - 1] === '') {\n      while (sections.length < 8) sections.push('0')\n    } else if (sections.length < 8) {\n      for (i = 0; i < sections.length && sections[i] !== ''; i++);\n      var argv = [i, '1']\n      for (i = 9 - sections.length; i > 0; i--) {\n        argv.push('0')\n      }\n      sections.splice.apply(sections, argv)\n    }\n\n    result = buff || Buffer.alloc(offset + 16)\n    for (i = 0; i < sections.length; i++) {\n      var word = parseInt(sections[i], 16)\n      result[offset++] = (word >> 8) & 0xff\n      result[offset++] = word & 0xff\n    }\n  }\n\n  if (!result) {\n    throw Error('Invalid ip address: ' + ip)\n  }\n\n  return result\n}\n\n// Copied from https://github.com/indutny/node-ip/blob/master/lib/ip.js#L63\nconst toString = function (buff, offset, length) {\n  offset = ~~offset\n  length = length || (buff.length - offset)\n\n  var result = []\n  var string\n  if (length === 4) {\n    // IPv4\n    for (let i = 0; i < length; i++) {\n      result.push(buff[offset + i])\n    }\n    string = result.join('.')\n  } else if (length === 16) {\n    // IPv6\n    for (let i = 0; i < length; i += 2) {\n      result.push(buff.readUInt16BE(offset + i).toString(16))\n    }\n    string = result.join(':')\n    string = string.replace(/(^|:)0(:0)*:0(:|$)/, '$1::$3')\n    string = string.replace(/:{3,4}/, '::')\n  }\n\n  return string\n}\n\nmodule.exports = {\n  isIP,\n  isV4,\n  isV6,\n  toBuffer,\n  toString\n}\n"]},"metadata":{},"sourceType":"script"}
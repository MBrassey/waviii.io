{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web3-utils'), require('web3-core-helpers'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('web3-core-method'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/assertThisInitialized'), require('lodash/isFunction'), require('lodash/isObject'), require('eth-lib/lib/hash'), require('eth-lib/lib/rlp'), require('eth-lib/lib/bytes'), require('eth-lib/lib/account'), require('web3-core'), require('scrypt.js'), require('lodash/isString'), require('uuid'), require('randombytes'), require('pbkdf2'), require('browserify-cipher')) : typeof define === 'function' && define.amd ? define(['exports', 'web3-utils', 'web3-core-helpers', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'web3-core-method', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/assertThisInitialized', 'lodash/isFunction', 'lodash/isObject', 'eth-lib/lib/hash', 'eth-lib/lib/rlp', 'eth-lib/lib/bytes', 'eth-lib/lib/account', 'web3-core', 'scrypt.js', 'lodash/isString', 'uuid', 'randombytes', 'pbkdf2', 'browserify-cipher'], factory) : (global = global || self, factory(global.Web3EthAccounts = {}, global.Utils, global.web3CoreHelpers, global._classCallCheck, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.web3CoreMethod, global._regeneratorRuntime, global._asyncToGenerator, global._createClass, global._assertThisInitialized, global.isFunction, global.isObject, global.Hash, global.RLP, global.Bytes, global.EthLibAccount, global.web3Core, global.scryptsy, global.isString, global.uuid, global.randomBytes, global.pbkdf2, global.browserifyCipher));\n})(this, function (exports, Utils, web3CoreHelpers, _classCallCheck, _possibleConstructorReturn, _getPrototypeOf, _inherits, web3CoreMethod, _regeneratorRuntime, _asyncToGenerator, _createClass, _assertThisInitialized, isFunction, isObject, Hash, RLP, Bytes, EthLibAccount, web3Core, scryptsy, isString, uuid, randomBytes, pbkdf2, browserifyCipher) {\n  'use strict';\n\n  _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n  _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n  _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n  _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n  _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n  _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n  _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n  _assertThisInitialized = _assertThisInitialized && _assertThisInitialized.hasOwnProperty('default') ? _assertThisInitialized['default'] : _assertThisInitialized;\n  isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n  isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n  Hash = Hash && Hash.hasOwnProperty('default') ? Hash['default'] : Hash;\n  RLP = RLP && RLP.hasOwnProperty('default') ? RLP['default'] : RLP;\n  Bytes = Bytes && Bytes.hasOwnProperty('default') ? Bytes['default'] : Bytes;\n  scryptsy = scryptsy && scryptsy.hasOwnProperty('default') ? scryptsy['default'] : scryptsy;\n  isString = isString && isString.hasOwnProperty('default') ? isString['default'] : isString;\n  uuid = uuid && uuid.hasOwnProperty('default') ? uuid['default'] : uuid;\n  randomBytes = randomBytes && randomBytes.hasOwnProperty('default') ? randomBytes['default'] : randomBytes;\n\n  var MethodFactory = function (_AbstractMethodFactor) {\n    _inherits(MethodFactory, _AbstractMethodFactor);\n\n    function MethodFactory(utils, formatters) {\n      var _this;\n\n      _classCallCheck(this, MethodFactory);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MethodFactory).call(this, utils, formatters));\n      _this.methods = {\n        getChainId: web3CoreMethod.ChainIdMethod,\n        getGasPrice: web3CoreMethod.GetGasPriceMethod,\n        getTransactionCount: web3CoreMethod.GetTransactionCountMethod\n      };\n      return _this;\n    }\n\n    return MethodFactory;\n  }(web3CoreMethod.AbstractMethodFactory);\n\n  var Account = function () {\n    function Account(options) {\n      var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _classCallCheck(this, Account);\n\n      this.address = options.address;\n      this.privateKey = options.privateKey;\n      this.accounts = accounts;\n    }\n\n    _createClass(Account, [{\n      key: \"signTransaction\",\n      value: function signTransaction(tx, callback) {\n        return this.accounts.signTransaction(tx, this.privateKey, callback);\n      }\n    }, {\n      key: \"sign\",\n      value: function sign(data) {\n        if (Utils.isHexStrict(data)) {\n          data = Utils.hexToBytes(data);\n        }\n\n        var messageBuffer = Buffer.from(data);\n        var preamble = \"\\x19Ethereum Signed Message:\\n\".concat(data.length);\n        var preambleBuffer = Buffer.from(preamble);\n        var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n        var hash = Hash.keccak256s(ethMessage);\n        var signature = EthLibAccount.sign(hash, this.privateKey);\n        var vrs = EthLibAccount.decodeSignature(signature);\n        return {\n          message: data,\n          messageHash: hash,\n          v: vrs[0],\n          r: vrs[1],\n          s: vrs[2],\n          signature: signature\n        };\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(password, options) {\n        return Account.fromPrivateKey(this.privateKey, this.accounts).toV3Keystore(password, options);\n      }\n    }, {\n      key: \"toV3Keystore\",\n      value: function toV3Keystore(password, options) {\n        options = options || {};\n        var salt = options.salt || randomBytes(32);\n        var iv = options.iv || randomBytes(16);\n        var derivedKey;\n        var kdf = options.kdf || 'scrypt';\n        var kdfparams = {\n          dklen: options.dklen || 32,\n          salt: salt.toString('hex')\n        };\n\n        if (kdf === 'pbkdf2') {\n          kdfparams.c = options.c || 262144;\n          kdfparams.prf = 'hmac-sha256';\n          derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), salt, kdfparams.c, kdfparams.dklen, 'sha256');\n        } else if (kdf === 'scrypt') {\n          kdfparams.n = options.n || 8192;\n          kdfparams.r = options.r || 8;\n          kdfparams.p = options.p || 1;\n          derivedKey = scryptsy(Buffer.from(password), salt, kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n        } else {\n          throw new Error('Unsupported kdf');\n        }\n\n        var cipher = browserifyCipher.createCipheriv(options.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n\n        if (!cipher) {\n          throw new Error('Unsupported cipher');\n        }\n\n        var ciphertext = Buffer.concat([cipher.update(Buffer.from(this.privateKey.replace('0x', ''), 'hex')), cipher.final()]);\n        var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')])).replace('0x', '');\n        return {\n          version: 3,\n          id: uuid.v4({\n            random: options.uuid || randomBytes(16)\n          }),\n          address: this.address.toLowerCase().replace('0x', ''),\n          crypto: {\n            ciphertext: ciphertext.toString('hex'),\n            cipherparams: {\n              iv: iv.toString('hex')\n            },\n            cipher: options.cipher || 'aes-128-ctr',\n            kdf: kdf,\n            kdfparams: kdfparams,\n            mac: mac.toString('hex')\n          }\n        };\n      }\n    }], [{\n      key: \"from\",\n      value: function from(entropy) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Account(EthLibAccount.create(entropy || Utils.randomHex(32)), accounts);\n      }\n    }, {\n      key: \"fromPrivateKey\",\n      value: function fromPrivateKey(privateKey) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Account(EthLibAccount.fromPrivate(privateKey), accounts);\n      }\n    }, {\n      key: \"fromV3Keystore\",\n      value: function fromV3Keystore(v3Keystore, password) {\n        var nonStrict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var accounts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n        if (!isString(password)) {\n          throw new Error('No password given.');\n        }\n\n        var json = isObject(v3Keystore) ? v3Keystore : JSON.parse(nonStrict ? v3Keystore.toLowerCase() : v3Keystore);\n\n        if (json.version !== 3) {\n          throw new Error('Not a valid V3 wallet');\n        }\n\n        var derivedKey;\n        var kdfparams;\n\n        if (json.crypto.kdf === 'scrypt') {\n          kdfparams = json.crypto.kdfparams;\n          derivedKey = scryptsy(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n        } else if (json.crypto.kdf === 'pbkdf2') {\n          kdfparams = json.crypto.kdfparams;\n\n          if (kdfparams.prf !== 'hmac-sha256') {\n            throw new Error('Unsupported parameters to PBKDF2');\n          }\n\n          derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n        } else {\n          throw new Error('Unsupported key derivation scheme');\n        }\n\n        var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n        var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])).replace('0x', '');\n\n        if (mac !== json.crypto.mac) {\n          throw new Error('Key derivation failed - possibly wrong password');\n        }\n\n        var decipher = browserifyCipher.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n        var seed = \"0x\".concat(Buffer.concat([decipher.update(ciphertext), decipher.final()]).toString('hex'));\n        return Account.fromPrivateKey(seed, accounts);\n      }\n    }]);\n\n    return Account;\n  }();\n\n  var Wallet = function () {\n    function Wallet(utils, accountsModule) {\n      _classCallCheck(this, Wallet);\n\n      this.utils = utils;\n      this.accountsModule = accountsModule;\n      this.defaultKeyName = 'web3js_wallet';\n      this.accounts = {};\n      this.accountsIndex = 0;\n      return new Proxy(this, {\n        get: function get(target, name) {\n          if (target.accounts[name]) {\n            return target.accounts[name];\n          }\n\n          if (name === 'length') {\n            return target.accountsIndex;\n          }\n\n          return target[name];\n        }\n      });\n    }\n\n    _createClass(Wallet, [{\n      key: \"create\",\n      value: function create(numberOfAccounts, entropy) {\n        for (var i = 0; i < numberOfAccounts; ++i) {\n          this.add(Account.from(entropy || this.utils.randomHex(32), this.accountsModule));\n        }\n\n        return this;\n      }\n    }, {\n      key: \"get\",\n      value: function get(account) {\n        return this.accounts[account];\n      }\n    }, {\n      key: \"add\",\n      value: function add(account) {\n        if (isString(account)) {\n          account = Account.fromPrivateKey(account, this.accountsModule);\n        }\n\n        if (!this.accounts[account.address]) {\n          this.accounts[this.accountsIndex] = account;\n          this.accounts[account.address] = account;\n          this.accounts[account.address.toLowerCase()] = account;\n          this.accountsIndex++;\n          return account;\n        }\n\n        return this.accounts[account.address];\n      }\n    }, {\n      key: \"remove\",\n      value: function remove(addressOrIndex) {\n        var account = this.accounts[addressOrIndex];\n\n        if (account) {\n          delete this.accounts[account.address];\n          delete this.accounts[account.address.toLowerCase()];\n          delete this.accounts[account.index];\n          return true;\n        }\n\n        return false;\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        for (var i = 0; i <= this.accountsIndex; i++) {\n          this.remove(i);\n        }\n\n        this.accountsIndex = 0;\n        return this;\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(password, options) {\n        var encryptedAccounts = [];\n\n        for (var i = 0; i < this.accountsIndex; i++) {\n          encryptedAccounts.push(this.accounts[i].encrypt(password, options));\n        }\n\n        return encryptedAccounts;\n      }\n    }, {\n      key: \"decrypt\",\n      value: function decrypt(encryptedWallet, password) {\n        var _this = this;\n\n        encryptedWallet.forEach(function (keystore) {\n          var account = Account.fromV3Keystore(keystore, password, false, _this.accountsModule);\n\n          if (!account) {\n            throw new Error(\"Couldn't decrypt accounts. Password wrong?\");\n          }\n\n          _this.add(account);\n        });\n        return this;\n      }\n    }, {\n      key: \"save\",\n      value: function save(password, keyName) {\n        console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n\n        if (typeof localStorage === 'undefined') {\n          throw new TypeError('window.localStorage is undefined.');\n        }\n\n        try {\n          localStorage.setItem(keyName || this.defaultKeyName, JSON.stringify(this.encrypt(password)));\n        } catch (error) {\n          if (error.code === 18) {\n            return true;\n          }\n\n          throw new Error(error);\n        }\n\n        return true;\n      }\n    }, {\n      key: \"load\",\n      value: function load(password, keyName) {\n        console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n\n        if (typeof localStorage === 'undefined') {\n          throw new TypeError('window.localStorage is undefined.');\n        }\n\n        var keystore;\n\n        try {\n          keystore = localStorage.getItem(keyName || this.defaultKeyName);\n\n          if (keystore) {\n            keystore = JSON.parse(keystore);\n          }\n        } catch (error) {\n          if (error.code === 18) {\n            keystore = this.defaultKeyName;\n          } else {\n            throw new Error(error);\n          }\n        }\n\n        return this.decrypt(keystore || [], password);\n      }\n    }]);\n\n    return Wallet;\n  }();\n\n  var Accounts = function (_AbstractWeb3Module) {\n    _inherits(Accounts, _AbstractWeb3Module);\n\n    function Accounts(provider, utils, formatters, methodFactory, options, net) {\n      var _this;\n\n      _classCallCheck(this, Accounts);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Accounts).call(this, provider, options, methodFactory, net));\n      _this.utils = utils;\n      _this.formatters = formatters;\n      _this._transactionSigner = options.transactionSigner;\n      _this.defaultKeyName = 'web3js_wallet';\n      _this.accounts = {};\n      _this.accountsIndex = 0;\n      _this.wallet = new Wallet(utils, _assertThisInitialized(_this));\n      return _this;\n    }\n\n    _createClass(Accounts, [{\n      key: \"create\",\n      value: function create(entropy) {\n        return Account.from(entropy, this);\n      }\n    }, {\n      key: \"privateKeyToAccount\",\n      value: function privateKeyToAccount(privateKey) {\n        return Account.fromPrivateKey(privateKey, this);\n      }\n    }, {\n      key: \"hashMessage\",\n      value: function hashMessage(data) {\n        if (this.utils.isHexStrict(data)) {\n          data = this.utils.hexToBytes(data);\n        }\n\n        var messageBuffer = Buffer.from(data);\n        var preambleBuffer = Buffer.from(\"\\x19Ethereum Signed Message:\\n\".concat(data.length));\n        var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n        return Hash.keccak256s(ethMessage);\n      }\n    }, {\n      key: \"signTransaction\",\n      value: function () {\n        var _signTransaction = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tx, privateKey, callback) {\n          var account, signedTransaction;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  account = Account.fromPrivateKey(privateKey, this);\n\n                  if (tx.chainId) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  _context.next = 5;\n                  return this.getChainId();\n\n                case 5:\n                  tx.chainId = _context.sent;\n\n                case 6:\n                  if (tx.gasPrice) {\n                    _context.next = 10;\n                    break;\n                  }\n\n                  _context.next = 9;\n                  return this.getGasPrice();\n\n                case 9:\n                  tx.gasPrice = _context.sent;\n\n                case 10:\n                  if (!(!tx.nonce && tx.nonce !== 0)) {\n                    _context.next = 14;\n                    break;\n                  }\n\n                  _context.next = 13;\n                  return this.getTransactionCount(account.address);\n\n                case 13:\n                  tx.nonce = _context.sent;\n\n                case 14:\n                  _context.next = 16;\n                  return this.transactionSigner.sign(this.formatters.inputCallFormatter(tx, this), account.privateKey);\n\n                case 16:\n                  signedTransaction = _context.sent;\n\n                  if (isFunction(callback)) {\n                    callback(false, signedTransaction);\n                  }\n\n                  return _context.abrupt(\"return\", signedTransaction);\n\n                case 21:\n                  _context.prev = 21;\n                  _context.t0 = _context[\"catch\"](0);\n\n                  if (!isFunction(callback)) {\n                    _context.next = 26;\n                    break;\n                  }\n\n                  callback(_context.t0, null);\n                  return _context.abrupt(\"return\");\n\n                case 26:\n                  throw _context.t0;\n\n                case 27:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[0, 21]]);\n        }));\n\n        function signTransaction(_x, _x2, _x3) {\n          return _signTransaction.apply(this, arguments);\n        }\n\n        return signTransaction;\n      }()\n    }, {\n      key: \"recoverTransaction\",\n      value: function recoverTransaction(rawTx) {\n        var values = RLP.decode(rawTx);\n        var signature = EthLibAccount.encodeSignature(values.slice(6, 9));\n        var recovery = Bytes.toNumber(values[6]);\n        var extraData = recovery < 35 ? [] : [Bytes.fromNumber(recovery - 35 >> 1), '0x', '0x'];\n        var signingData = values.slice(0, 6).concat(extraData);\n        var signingDataHex = RLP.encode(signingData);\n        return EthLibAccount.recover(Hash.keccak256(signingDataHex), signature);\n      }\n    }, {\n      key: \"sign\",\n      value: function sign(data, privateKey) {\n        if (this.utils.isHexStrict(data)) {\n          data = this.utils.hexToBytes(data);\n        }\n\n        return Account.fromPrivateKey(privateKey, this).sign(data);\n      }\n    }, {\n      key: \"recover\",\n      value: function recover(message, signature, preFixed) {\n        if (isObject(message)) {\n          return this.recover(message.messageHash, EthLibAccount.encodeSignature([message.v, message.r, message.s]), true);\n        }\n\n        if (!preFixed) {\n          message = this.hashMessage(message);\n        }\n\n        if (arguments.length >= 4) {\n          return this.recover(arguments[0], EthLibAccount.encodeSignature([arguments[1], arguments[2], arguments[3]]), !!arguments[4]);\n        }\n\n        return EthLibAccount.recover(message, signature);\n      }\n    }, {\n      key: \"decrypt\",\n      value: function decrypt(v3Keystore, password, nonStrict) {\n        return Account.fromV3Keystore(v3Keystore, password, nonStrict, this);\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(privateKey, password, options) {\n        return Account.fromPrivateKey(privateKey, this).toV3Keystore(password, options);\n      }\n    }, {\n      key: \"transactionSigner\",\n      get: function get() {\n        return this._transactionSigner;\n      },\n      set: function set(transactionSigner) {\n        if (transactionSigner.type && transactionSigner.type === 'TransactionSigner') {\n          throw new Error('Invalid TransactionSigner given!');\n        }\n\n        this._transactionSigner = transactionSigner;\n      }\n    }]);\n\n    return Accounts;\n  }(web3Core.AbstractWeb3Module);\n\n  function Accounts$1(provider) {\n    var net = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return new Accounts(provider, Utils, web3CoreHelpers.formatters, new MethodFactory(Utils, web3CoreHelpers.formatters), options, net);\n  }\n\n  exports.Accounts = Accounts$1;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/home/luc1d/Code/Github/waviii.io/node_modules/web3-eth-accounts/dist/web3-eth-accounts.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","Web3EthAccounts","Utils","web3CoreHelpers","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","_inherits","web3CoreMethod","_regeneratorRuntime","_asyncToGenerator","_createClass","_assertThisInitialized","isFunction","isObject","Hash","RLP","Bytes","EthLibAccount","web3Core","scryptsy","isString","uuid","randomBytes","pbkdf2","browserifyCipher","hasOwnProperty","MethodFactory","_AbstractMethodFactor","utils","formatters","_this","call","methods","getChainId","ChainIdMethod","getGasPrice","GetGasPriceMethod","getTransactionCount","GetTransactionCountMethod","AbstractMethodFactory","Account","options","accounts","arguments","length","undefined","address","privateKey","key","value","signTransaction","tx","callback","sign","data","isHexStrict","hexToBytes","messageBuffer","Buffer","from","preamble","concat","preambleBuffer","ethMessage","hash","keccak256s","signature","vrs","decodeSignature","message","messageHash","v","r","s","encrypt","password","fromPrivateKey","toV3Keystore","salt","iv","derivedKey","kdf","kdfparams","dklen","toString","c","prf","pbkdf2Sync","n","p","Error","cipher","createCipheriv","slice","ciphertext","update","replace","final","mac","keccak256","version","id","v4","random","toLowerCase","crypto","cipherparams","entropy","create","randomHex","fromPrivate","fromV3Keystore","v3Keystore","nonStrict","json","JSON","parse","decipher","createDecipheriv","seed","Wallet","accountsModule","defaultKeyName","accountsIndex","Proxy","get","target","name","numberOfAccounts","i","add","account","remove","addressOrIndex","index","clear","encryptedAccounts","push","decrypt","encryptedWallet","forEach","keystore","save","keyName","console","warn","localStorage","TypeError","setItem","stringify","error","code","load","getItem","Accounts","_AbstractWeb3Module","provider","methodFactory","net","_transactionSigner","transactionSigner","wallet","privateKeyToAccount","hashMessage","_signTransaction","mark","_callee","signedTransaction","wrap","_callee$","_context","prev","next","chainId","sent","gasPrice","nonce","inputCallFormatter","abrupt","t0","stop","_x","_x2","_x3","apply","recoverTransaction","rawTx","values","decode","encodeSignature","recovery","toNumber","extraData","fromNumber","signingData","signingDataHex","encode","recover","preFixed","set","type","AbstractWeb3Module","Accounts$1","Object","defineProperty"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web3-utils'), require('web3-core-helpers'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('web3-core-method'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/assertThisInitialized'), require('lodash/isFunction'), require('lodash/isObject'), require('eth-lib/lib/hash'), require('eth-lib/lib/rlp'), require('eth-lib/lib/bytes'), require('eth-lib/lib/account'), require('web3-core'), require('scrypt.js'), require('lodash/isString'), require('uuid'), require('randombytes'), require('pbkdf2'), require('browserify-cipher')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'web3-utils', 'web3-core-helpers', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'web3-core-method', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/assertThisInitialized', 'lodash/isFunction', 'lodash/isObject', 'eth-lib/lib/hash', 'eth-lib/lib/rlp', 'eth-lib/lib/bytes', 'eth-lib/lib/account', 'web3-core', 'scrypt.js', 'lodash/isString', 'uuid', 'randombytes', 'pbkdf2', 'browserify-cipher'], factory) :\n    (global = global || self, factory(global.Web3EthAccounts = {}, global.Utils, global.web3CoreHelpers, global._classCallCheck, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.web3CoreMethod, global._regeneratorRuntime, global._asyncToGenerator, global._createClass, global._assertThisInitialized, global.isFunction, global.isObject, global.Hash, global.RLP, global.Bytes, global.EthLibAccount, global.web3Core, global.scryptsy, global.isString, global.uuid, global.randomBytes, global.pbkdf2, global.browserifyCipher));\n}(this, function (exports, Utils, web3CoreHelpers, _classCallCheck, _possibleConstructorReturn, _getPrototypeOf, _inherits, web3CoreMethod, _regeneratorRuntime, _asyncToGenerator, _createClass, _assertThisInitialized, isFunction, isObject, Hash, RLP, Bytes, EthLibAccount, web3Core, scryptsy, isString, uuid, randomBytes, pbkdf2, browserifyCipher) { 'use strict';\n\n    _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n    _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n    _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n    _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n    _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n    _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n    _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n    _assertThisInitialized = _assertThisInitialized && _assertThisInitialized.hasOwnProperty('default') ? _assertThisInitialized['default'] : _assertThisInitialized;\n    isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n    isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n    Hash = Hash && Hash.hasOwnProperty('default') ? Hash['default'] : Hash;\n    RLP = RLP && RLP.hasOwnProperty('default') ? RLP['default'] : RLP;\n    Bytes = Bytes && Bytes.hasOwnProperty('default') ? Bytes['default'] : Bytes;\n    scryptsy = scryptsy && scryptsy.hasOwnProperty('default') ? scryptsy['default'] : scryptsy;\n    isString = isString && isString.hasOwnProperty('default') ? isString['default'] : isString;\n    uuid = uuid && uuid.hasOwnProperty('default') ? uuid['default'] : uuid;\n    randomBytes = randomBytes && randomBytes.hasOwnProperty('default') ? randomBytes['default'] : randomBytes;\n\n    var MethodFactory =\n    function (_AbstractMethodFactor) {\n      _inherits(MethodFactory, _AbstractMethodFactor);\n      function MethodFactory(utils, formatters) {\n        var _this;\n        _classCallCheck(this, MethodFactory);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MethodFactory).call(this, utils, formatters));\n        _this.methods = {\n          getChainId: web3CoreMethod.ChainIdMethod,\n          getGasPrice: web3CoreMethod.GetGasPriceMethod,\n          getTransactionCount: web3CoreMethod.GetTransactionCountMethod\n        };\n        return _this;\n      }\n      return MethodFactory;\n    }(web3CoreMethod.AbstractMethodFactory);\n\n    var Account =\n    function () {\n      function Account(options) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        _classCallCheck(this, Account);\n        this.address = options.address;\n        this.privateKey = options.privateKey;\n        this.accounts = accounts;\n      }\n      _createClass(Account, [{\n        key: \"signTransaction\",\n        value: function signTransaction(tx, callback) {\n          return this.accounts.signTransaction(tx, this.privateKey, callback);\n        }\n      }, {\n        key: \"sign\",\n        value: function sign(data) {\n          if (Utils.isHexStrict(data)) {\n            data = Utils.hexToBytes(data);\n          }\n          var messageBuffer = Buffer.from(data);\n          var preamble = \"\\x19Ethereum Signed Message:\\n\".concat(data.length);\n          var preambleBuffer = Buffer.from(preamble);\n          var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n          var hash = Hash.keccak256s(ethMessage);\n          var signature = EthLibAccount.sign(hash, this.privateKey);\n          var vrs = EthLibAccount.decodeSignature(signature);\n          return {\n            message: data,\n            messageHash: hash,\n            v: vrs[0],\n            r: vrs[1],\n            s: vrs[2],\n            signature: signature\n          };\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(password, options) {\n          return Account.fromPrivateKey(this.privateKey, this.accounts).toV3Keystore(password, options);\n        }\n      }, {\n        key: \"toV3Keystore\",\n        value: function toV3Keystore(password, options) {\n          options = options || {};\n          var salt = options.salt || randomBytes(32);\n          var iv = options.iv || randomBytes(16);\n          var derivedKey;\n          var kdf = options.kdf || 'scrypt';\n          var kdfparams = {\n            dklen: options.dklen || 32,\n            salt: salt.toString('hex')\n          };\n          if (kdf === 'pbkdf2') {\n            kdfparams.c = options.c || 262144;\n            kdfparams.prf = 'hmac-sha256';\n            derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), salt, kdfparams.c, kdfparams.dklen, 'sha256');\n          } else if (kdf === 'scrypt') {\n            kdfparams.n = options.n || 8192;\n            kdfparams.r = options.r || 8;\n            kdfparams.p = options.p || 1;\n            derivedKey = scryptsy(Buffer.from(password), salt, kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n          } else {\n            throw new Error('Unsupported kdf');\n          }\n          var cipher = browserifyCipher.createCipheriv(options.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n          if (!cipher) {\n            throw new Error('Unsupported cipher');\n          }\n          var ciphertext = Buffer.concat([cipher.update(Buffer.from(this.privateKey.replace('0x', ''), 'hex')), cipher.final()]);\n          var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')])).replace('0x', '');\n          return {\n            version: 3,\n            id: uuid.v4({\n              random: options.uuid || randomBytes(16)\n            }),\n            address: this.address.toLowerCase().replace('0x', ''),\n            crypto: {\n              ciphertext: ciphertext.toString('hex'),\n              cipherparams: {\n                iv: iv.toString('hex')\n              },\n              cipher: options.cipher || 'aes-128-ctr',\n              kdf: kdf,\n              kdfparams: kdfparams,\n              mac: mac.toString('hex')\n            }\n          };\n        }\n      }], [{\n        key: \"from\",\n        value: function from(entropy) {\n          var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new Account(EthLibAccount.create(entropy || Utils.randomHex(32)), accounts);\n        }\n      }, {\n        key: \"fromPrivateKey\",\n        value: function fromPrivateKey(privateKey) {\n          var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new Account(EthLibAccount.fromPrivate(privateKey), accounts);\n        }\n      }, {\n        key: \"fromV3Keystore\",\n        value: function fromV3Keystore(v3Keystore, password) {\n          var nonStrict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n          var accounts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          if (!isString(password)) {\n            throw new Error('No password given.');\n          }\n          var json = isObject(v3Keystore) ? v3Keystore : JSON.parse(nonStrict ? v3Keystore.toLowerCase() : v3Keystore);\n          if (json.version !== 3) {\n            throw new Error('Not a valid V3 wallet');\n          }\n          var derivedKey;\n          var kdfparams;\n          if (json.crypto.kdf === 'scrypt') {\n            kdfparams = json.crypto.kdfparams;\n            derivedKey = scryptsy(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n          } else if (json.crypto.kdf === 'pbkdf2') {\n            kdfparams = json.crypto.kdfparams;\n            if (kdfparams.prf !== 'hmac-sha256') {\n              throw new Error('Unsupported parameters to PBKDF2');\n            }\n            derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n          } else {\n            throw new Error('Unsupported key derivation scheme');\n          }\n          var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n          var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])).replace('0x', '');\n          if (mac !== json.crypto.mac) {\n            throw new Error('Key derivation failed - possibly wrong password');\n          }\n          var decipher = browserifyCipher.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n          var seed = \"0x\".concat(Buffer.concat([decipher.update(ciphertext), decipher.final()]).toString('hex'));\n          return Account.fromPrivateKey(seed, accounts);\n        }\n      }]);\n      return Account;\n    }();\n\n    var Wallet =\n    function () {\n      function Wallet(utils, accountsModule) {\n        _classCallCheck(this, Wallet);\n        this.utils = utils;\n        this.accountsModule = accountsModule;\n        this.defaultKeyName = 'web3js_wallet';\n        this.accounts = {};\n        this.accountsIndex = 0;\n        return new Proxy(this, {\n          get: function get(target, name) {\n            if (target.accounts[name]) {\n              return target.accounts[name];\n            }\n            if (name === 'length') {\n              return target.accountsIndex;\n            }\n            return target[name];\n          }\n        });\n      }\n      _createClass(Wallet, [{\n        key: \"create\",\n        value: function create(numberOfAccounts, entropy) {\n          for (var i = 0; i < numberOfAccounts; ++i) {\n            this.add(Account.from(entropy || this.utils.randomHex(32), this.accountsModule));\n          }\n          return this;\n        }\n      }, {\n        key: \"get\",\n        value: function get(account) {\n          return this.accounts[account];\n        }\n      }, {\n        key: \"add\",\n        value: function add(account) {\n          if (isString(account)) {\n            account = Account.fromPrivateKey(account, this.accountsModule);\n          }\n          if (!this.accounts[account.address]) {\n            this.accounts[this.accountsIndex] = account;\n            this.accounts[account.address] = account;\n            this.accounts[account.address.toLowerCase()] = account;\n            this.accountsIndex++;\n            return account;\n          }\n          return this.accounts[account.address];\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(addressOrIndex) {\n          var account = this.accounts[addressOrIndex];\n          if (account) {\n            delete this.accounts[account.address];\n            delete this.accounts[account.address.toLowerCase()];\n            delete this.accounts[account.index];\n            return true;\n          }\n          return false;\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          for (var i = 0; i <= this.accountsIndex; i++) {\n            this.remove(i);\n          }\n          this.accountsIndex = 0;\n          return this;\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(password, options) {\n          var encryptedAccounts = [];\n          for (var i = 0; i < this.accountsIndex; i++) {\n            encryptedAccounts.push(this.accounts[i].encrypt(password, options));\n          }\n          return encryptedAccounts;\n        }\n      }, {\n        key: \"decrypt\",\n        value: function decrypt(encryptedWallet, password) {\n          var _this = this;\n          encryptedWallet.forEach(function (keystore) {\n            var account = Account.fromV3Keystore(keystore, password, false, _this.accountsModule);\n            if (!account) {\n              throw new Error(\"Couldn't decrypt accounts. Password wrong?\");\n            }\n            _this.add(account);\n          });\n          return this;\n        }\n      }, {\n        key: \"save\",\n        value: function save(password, keyName) {\n          console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n          if (typeof localStorage === 'undefined') {\n            throw new TypeError('window.localStorage is undefined.');\n          }\n          try {\n            localStorage.setItem(keyName || this.defaultKeyName, JSON.stringify(this.encrypt(password)));\n          } catch (error) {\n            if (error.code === 18) {\n              return true;\n            }\n            throw new Error(error);\n          }\n          return true;\n        }\n      }, {\n        key: \"load\",\n        value: function load(password, keyName) {\n          console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n          if (typeof localStorage === 'undefined') {\n            throw new TypeError('window.localStorage is undefined.');\n          }\n          var keystore;\n          try {\n            keystore = localStorage.getItem(keyName || this.defaultKeyName);\n            if (keystore) {\n              keystore = JSON.parse(keystore);\n            }\n          } catch (error) {\n            if (error.code === 18) {\n              keystore = this.defaultKeyName;\n            } else {\n              throw new Error(error);\n            }\n          }\n          return this.decrypt(keystore || [], password);\n        }\n      }]);\n      return Wallet;\n    }();\n\n    var Accounts =\n    function (_AbstractWeb3Module) {\n      _inherits(Accounts, _AbstractWeb3Module);\n      function Accounts(provider, utils, formatters, methodFactory, options, net) {\n        var _this;\n        _classCallCheck(this, Accounts);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Accounts).call(this, provider, options, methodFactory, net));\n        _this.utils = utils;\n        _this.formatters = formatters;\n        _this._transactionSigner = options.transactionSigner;\n        _this.defaultKeyName = 'web3js_wallet';\n        _this.accounts = {};\n        _this.accountsIndex = 0;\n        _this.wallet = new Wallet(utils, _assertThisInitialized(_this));\n        return _this;\n      }\n      _createClass(Accounts, [{\n        key: \"create\",\n        value: function create(entropy) {\n          return Account.from(entropy, this);\n        }\n      }, {\n        key: \"privateKeyToAccount\",\n        value: function privateKeyToAccount(privateKey) {\n          return Account.fromPrivateKey(privateKey, this);\n        }\n      }, {\n        key: \"hashMessage\",\n        value: function hashMessage(data) {\n          if (this.utils.isHexStrict(data)) {\n            data = this.utils.hexToBytes(data);\n          }\n          var messageBuffer = Buffer.from(data);\n          var preambleBuffer = Buffer.from(\"\\x19Ethereum Signed Message:\\n\".concat(data.length));\n          var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n          return Hash.keccak256s(ethMessage);\n        }\n      }, {\n        key: \"signTransaction\",\n        value: function () {\n          var _signTransaction = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(tx, privateKey, callback) {\n            var account, signedTransaction;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    account = Account.fromPrivateKey(privateKey, this);\n                    if (tx.chainId) {\n                      _context.next = 6;\n                      break;\n                    }\n                    _context.next = 5;\n                    return this.getChainId();\n                  case 5:\n                    tx.chainId = _context.sent;\n                  case 6:\n                    if (tx.gasPrice) {\n                      _context.next = 10;\n                      break;\n                    }\n                    _context.next = 9;\n                    return this.getGasPrice();\n                  case 9:\n                    tx.gasPrice = _context.sent;\n                  case 10:\n                    if (!(!tx.nonce && tx.nonce !== 0)) {\n                      _context.next = 14;\n                      break;\n                    }\n                    _context.next = 13;\n                    return this.getTransactionCount(account.address);\n                  case 13:\n                    tx.nonce = _context.sent;\n                  case 14:\n                    _context.next = 16;\n                    return this.transactionSigner.sign(this.formatters.inputCallFormatter(tx, this), account.privateKey);\n                  case 16:\n                    signedTransaction = _context.sent;\n                    if (isFunction(callback)) {\n                      callback(false, signedTransaction);\n                    }\n                    return _context.abrupt(\"return\", signedTransaction);\n                  case 21:\n                    _context.prev = 21;\n                    _context.t0 = _context[\"catch\"](0);\n                    if (!isFunction(callback)) {\n                      _context.next = 26;\n                      break;\n                    }\n                    callback(_context.t0, null);\n                    return _context.abrupt(\"return\");\n                  case 26:\n                    throw _context.t0;\n                  case 27:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this, [[0, 21]]);\n          }));\n          function signTransaction(_x, _x2, _x3) {\n            return _signTransaction.apply(this, arguments);\n          }\n          return signTransaction;\n        }()\n      }, {\n        key: \"recoverTransaction\",\n        value: function recoverTransaction(rawTx) {\n          var values = RLP.decode(rawTx);\n          var signature = EthLibAccount.encodeSignature(values.slice(6, 9));\n          var recovery = Bytes.toNumber(values[6]);\n          var extraData = recovery < 35 ? [] : [Bytes.fromNumber(recovery - 35 >> 1), '0x', '0x'];\n          var signingData = values.slice(0, 6).concat(extraData);\n          var signingDataHex = RLP.encode(signingData);\n          return EthLibAccount.recover(Hash.keccak256(signingDataHex), signature);\n        }\n      }, {\n        key: \"sign\",\n        value: function sign(data, privateKey) {\n          if (this.utils.isHexStrict(data)) {\n            data = this.utils.hexToBytes(data);\n          }\n          return Account.fromPrivateKey(privateKey, this).sign(data);\n        }\n      }, {\n        key: \"recover\",\n        value: function recover(message, signature, preFixed) {\n          if (isObject(message)) {\n            return this.recover(message.messageHash, EthLibAccount.encodeSignature([message.v, message.r, message.s]), true);\n          }\n          if (!preFixed) {\n            message = this.hashMessage(message);\n          }\n          if (arguments.length >= 4) {\n            return this.recover(arguments[0], EthLibAccount.encodeSignature([arguments[1], arguments[2], arguments[3]]), !!arguments[4]);\n          }\n          return EthLibAccount.recover(message, signature);\n        }\n      }, {\n        key: \"decrypt\",\n        value: function decrypt(v3Keystore, password, nonStrict) {\n          return Account.fromV3Keystore(v3Keystore, password, nonStrict, this);\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(privateKey, password, options) {\n          return Account.fromPrivateKey(privateKey, this).toV3Keystore(password, options);\n        }\n      }, {\n        key: \"transactionSigner\",\n        get: function get() {\n          return this._transactionSigner;\n        }\n        ,\n        set: function set(transactionSigner) {\n          if (transactionSigner.type && transactionSigner.type === 'TransactionSigner') {\n            throw new Error('Invalid TransactionSigner given!');\n          }\n          this._transactionSigner = transactionSigner;\n        }\n      }]);\n      return Accounts;\n    }(web3Core.AbstractWeb3Module);\n\n    function Accounts$1(provider) {\n      var net = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return new Accounts(provider, Utils, web3CoreHelpers.formatters, new MethodFactory(Utils, web3CoreHelpers.formatters), options, net);\n    }\n\n    exports.Accounts = Accounts$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}
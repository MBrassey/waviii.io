{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass'), require('websocket'), require('xhr2-cookies'), require('url-parse'), require('@babel/runtime/helpers/typeof'), require('lodash/isFunction'), require('lodash/isObject'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/get'), require('@babel/runtime/helpers/inherits'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('eventemitter3'), require('lodash/isArray'), require('http'), require('https')) : typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass', 'websocket', 'xhr2-cookies', 'url-parse', '@babel/runtime/helpers/typeof', 'lodash/isFunction', 'lodash/isObject', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/get', '@babel/runtime/helpers/inherits', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', 'eventemitter3', 'lodash/isArray', 'http', 'https'], factory) : (global = global || self, factory(global.Web3Providers = {}, global._classCallCheck, global._createClass, global.websocket, global.xhr2Cookies, global.URL, global._typeof, global.isFunction, global.isObject, global._possibleConstructorReturn, global._getPrototypeOf, global._get, global._inherits, global._regeneratorRuntime, global._asyncToGenerator, global.EventEmitter, global.isArray, global.http, global.https));\n})(this, function (exports, _classCallCheck, _createClass, websocket, xhr2Cookies, URL, _typeof, isFunction, isObject, _possibleConstructorReturn, _getPrototypeOf, _get, _inherits, _regeneratorRuntime, _asyncToGenerator, EventEmitter, isArray, http, https) {\n  'use strict';\n\n  _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n  _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n  URL = URL && URL.hasOwnProperty('default') ? URL['default'] : URL;\n  _typeof = _typeof && _typeof.hasOwnProperty('default') ? _typeof['default'] : _typeof;\n  isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n  isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n  _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n  _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n  _get = _get && _get.hasOwnProperty('default') ? _get['default'] : _get;\n  _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n  _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n  _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n  EventEmitter = EventEmitter && EventEmitter.hasOwnProperty('default') ? EventEmitter['default'] : EventEmitter;\n  isArray = isArray && isArray.hasOwnProperty('default') ? isArray['default'] : isArray;\n  http = http && http.hasOwnProperty('default') ? http['default'] : http;\n  https = https && https.hasOwnProperty('default') ? https['default'] : https;\n\n  var global = function () {\n    return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n  }() || new Function('return this')();\n\n  var ProviderResolver = function () {\n    function ProviderResolver(providersModuleFactory) {\n      _classCallCheck(this, ProviderResolver);\n\n      this.providersModuleFactory = providersModuleFactory;\n    }\n\n    _createClass(ProviderResolver, [{\n      key: \"resolve\",\n      value: function resolve(provider, net) {\n        if (!provider) {\n          return provider;\n        }\n\n        if (typeof provider === 'string') {\n          if (/^http(s)?:\\/\\//i.test(provider)) {\n            return this.providersModuleFactory.createHttpProvider(provider);\n          }\n\n          if (/^ws(s)?:\\/\\//i.test(provider)) {\n            return this.providersModuleFactory.createWebsocketProvider(provider);\n          }\n\n          if (provider && isObject(net) && isFunction(net.connect)) {\n            return this.providersModuleFactory.createIpcProvider(provider, net);\n          }\n        }\n\n        if (provider.sendPayload && provider.subscribe) {\n          return provider;\n        }\n\n        if (typeof global.mist !== 'undefined' && provider.constructor.name === 'EthereumProvider') {\n          return this.providersModuleFactory.createMistEthereumProvider(provider);\n        }\n\n        if (provider.isEIP1193) {\n          return this.providersModuleFactory.createWeb3EthereumProvider(provider);\n        }\n\n        if (this.isMetamaskInpageProvider(provider)) {\n          return this.providersModuleFactory.createMetamaskProvider(provider);\n        }\n\n        return this.providersModuleFactory.createCustomProvider(provider);\n      }\n    }, {\n      key: \"isMetamaskInpageProvider\",\n      value: function isMetamaskInpageProvider(provider) {\n        return provider.constructor.name === 'MetamaskInpageProvider';\n      }\n    }]);\n\n    return ProviderResolver;\n  }();\n\n  var messageId = 0;\n\n  var JsonRpcMapper = function () {\n    function JsonRpcMapper() {\n      _classCallCheck(this, JsonRpcMapper);\n    }\n\n    _createClass(JsonRpcMapper, null, [{\n      key: \"toPayload\",\n      value: function toPayload(method, params) {\n        if (!method) {\n          throw new Error(\"JSONRPC method should be specified for params: \\\"\".concat(JSON.stringify(params), \"\\\"!\"));\n        }\n\n        var id = messageId;\n        messageId++;\n        return {\n          jsonrpc: '2.0',\n          id: id,\n          method: method,\n          params: params || []\n        };\n      }\n    }]);\n\n    return JsonRpcMapper;\n  }();\n\n  var JsonRpcResponseValidator = function () {\n    function JsonRpcResponseValidator() {\n      _classCallCheck(this, JsonRpcResponseValidator);\n    }\n\n    _createClass(JsonRpcResponseValidator, null, [{\n      key: \"validate\",\n      value: function validate(response) {\n        var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (isObject(response)) {\n          if (response.error) {\n            if (response.error instanceof Error) {\n              return new Error(\"Node error: \".concat(response.error.message));\n            }\n\n            return new Error(\"Node error: \".concat(JSON.stringify(response.error)));\n          }\n\n          if (payload && response.id !== payload.id) {\n            return new Error(\"Validation error: Invalid JSON-RPC response ID (request: \".concat(payload.id, \" / response: \").concat(response.id, \")\"));\n          }\n\n          if (response.result === undefined) {\n            return new Error('Validation error: Undefined JSON-RPC result');\n          }\n\n          return true;\n        }\n\n        return new Error('Validation error: Response should be of type Object');\n      }\n    }]);\n\n    return JsonRpcResponseValidator;\n  }();\n\n  var AbstractSocketProvider = function (_EventEmitter) {\n    _inherits(AbstractSocketProvider, _EventEmitter);\n\n    function AbstractSocketProvider(connection, timeout) {\n      var _this;\n\n      _classCallCheck(this, AbstractSocketProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(AbstractSocketProvider).call(this));\n      _this.connection = connection;\n      _this.timeout = timeout;\n      _this.subscriptions = {};\n\n      _this.registerEventListeners();\n\n      _this.READY = 'ready';\n      _this.CONNECT = 'connect';\n      _this.ERROR = 'error';\n      _this.CLOSE = 'close';\n      _this.SOCKET_MESSAGE = 'socket_message';\n      _this.SOCKET_READY = 'socket_ready';\n      _this.SOCKET_CLOSE = 'socket_close';\n      _this.SOCKET_ERROR = 'socket_error';\n      _this.SOCKET_CONNECT = 'socket_connect';\n      _this.SOCKET_NETWORK_CHANGED = 'socket_networkChanged';\n      _this.SOCKET_ACCOUNTS_CHANGED = 'socket_accountsChanged';\n      return _this;\n    }\n\n    _createClass(AbstractSocketProvider, [{\n      key: \"supportsSubscriptions\",\n      value: function supportsSubscriptions() {\n        return true;\n      }\n    }, {\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {}\n    }, {\n      key: \"removeAllSocketListeners\",\n      value: function removeAllSocketListeners() {\n        this.removeAllListeners(this.SOCKET_MESSAGE);\n        this.removeAllListeners(this.SOCKET_READY);\n        this.removeAllListeners(this.SOCKET_CLOSE);\n        this.removeAllListeners(this.SOCKET_ERROR);\n        this.removeAllListeners(this.SOCKET_CONNECT);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect(code, reason) {}\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          var response, validationResult;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n\n                case 2:\n                  response = _context.sent;\n                  validationResult = JsonRpcResponseValidator.validate(response);\n\n                  if (!(validationResult instanceof Error)) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw validationResult;\n\n                case 6:\n                  return _context.abrupt(\"return\", response.result);\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var payload = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n        });\n        return this.sendPayload(payload);\n      }\n    }, {\n      key: \"onReady\",\n      value: function onReady(event) {\n        this.emit(this.READY, event);\n        this.emit(this.SOCKET_READY, event);\n      }\n    }, {\n      key: \"onError\",\n      value: function onError(error) {\n        this.emit(this.ERROR, error);\n        this.emit(this.SOCKET_ERROR, error);\n        this.removeAllSocketListeners();\n        this.removeAllListeners();\n      }\n    }, {\n      key: \"onClose\",\n      value: function onClose() {\n        var error = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        this.emit(this.CLOSE, error);\n        this.emit(this.SOCKET_CLOSE, error);\n        this.removeAllSocketListeners();\n        this.removeAllListeners();\n      }\n    }, {\n      key: \"onConnect\",\n      value: function () {\n        var _onConnect = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n          var subscriptionKeys, subscriptionId, _i, _subscriptionKeys, key;\n\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  subscriptionKeys = Object.keys(this.subscriptions);\n\n                  if (!(subscriptionKeys.length > 0)) {\n                    _context2.next = 13;\n                    break;\n                  }\n\n                  _i = 0, _subscriptionKeys = subscriptionKeys;\n\n                case 3:\n                  if (!(_i < _subscriptionKeys.length)) {\n                    _context2.next = 13;\n                    break;\n                  }\n\n                  key = _subscriptionKeys[_i];\n                  _context2.next = 7;\n                  return this.subscribe(this.subscriptions[key].subscribeMethod, this.subscriptions[key].parameters[0], this.subscriptions[key].parameters.slice(1));\n\n                case 7:\n                  subscriptionId = _context2.sent;\n                  delete this.subscriptions[subscriptionId];\n                  this.subscriptions[key].id = subscriptionId;\n\n                case 10:\n                  _i++;\n                  _context2.next = 3;\n                  break;\n\n                case 13:\n                  this.emit(this.SOCKET_CONNECT);\n                  this.emit(this.CONNECT);\n\n                case 15:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function onConnect() {\n          return _onConnect.apply(this, arguments);\n        }\n\n        return onConnect;\n      }()\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(response) {\n        var event;\n\n        if (!isObject(response)) {\n          response = JSON.parse(response);\n        }\n\n        if (isArray(response)) {\n          event = response[0].id;\n        } else if (typeof response.id === 'undefined') {\n          event = this.getSubscriptionEvent(response.params.subscription);\n          response = response.params;\n        } else {\n          event = response.id;\n        }\n\n        this.emit(this.SOCKET_MESSAGE, response);\n        this.emit(event, response);\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.removeAllListeners();\n        this.registerEventListeners();\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe() {\n        var _this2 = this;\n\n        var subscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_subscribe';\n        var subscriptionMethod = arguments.length > 1 ? arguments[1] : undefined;\n        var parameters = arguments.length > 2 ? arguments[2] : undefined;\n        parameters.unshift(subscriptionMethod);\n        return this.send(subscribeMethod, parameters).then(function (subscriptionId) {\n          _this2.subscriptions[subscriptionId] = {\n            id: subscriptionId,\n            subscribeMethod: subscribeMethod,\n            parameters: parameters\n          };\n          return subscriptionId;\n        }).catch(function (error) {\n          throw new Error(\"Provider error: \".concat(error));\n        });\n      }\n    }, {\n      key: \"unsubscribe\",\n      value: function unsubscribe(subscriptionId) {\n        var _this3 = this;\n\n        var unsubscribeMethod = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'eth_unsubscribe';\n\n        if (this.hasSubscription(subscriptionId)) {\n          return this.send(unsubscribeMethod, [subscriptionId]).then(function (response) {\n            if (response) {\n              _this3.removeAllListeners(_this3.getSubscriptionEvent(subscriptionId));\n\n              delete _this3.subscriptions[subscriptionId];\n            }\n\n            return response;\n          });\n        }\n\n        return Promise.reject(new Error(\"Provider error: Subscription with ID \".concat(subscriptionId, \" does not exist.\")));\n      }\n    }, {\n      key: \"clearSubscriptions\",\n      value: function clearSubscriptions() {\n        var _this4 = this;\n\n        var unsubscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_unsubscribe';\n        var unsubscribePromises = [];\n        Object.keys(this.subscriptions).forEach(function (key) {\n          _this4.removeAllListeners(key);\n\n          unsubscribePromises.push(_this4.unsubscribe(_this4.subscriptions[key].id, unsubscribeMethod));\n        });\n        return Promise.all(unsubscribePromises).then(function (results) {\n          if (results.includes(false)) {\n            throw new Error(\"Could not unsubscribe all subscriptions: \".concat(JSON.stringify(results)));\n          }\n\n          return true;\n        });\n      }\n    }, {\n      key: \"hasSubscription\",\n      value: function hasSubscription(subscriptionId) {\n        return typeof this.getSubscriptionEvent(subscriptionId) !== 'undefined';\n      }\n    }, {\n      key: \"getSubscriptionEvent\",\n      value: function getSubscriptionEvent(subscriptionId) {\n        var _this5 = this;\n\n        if (this.subscriptions[subscriptionId]) {\n          return subscriptionId;\n        }\n\n        var event;\n        Object.keys(this.subscriptions).forEach(function (key) {\n          if (_this5.subscriptions[key].id === subscriptionId) {\n            event = key;\n          }\n        });\n        return event;\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {}\n    }]);\n\n    return AbstractSocketProvider;\n  }(EventEmitter);\n\n  var WebsocketProvider = function (_AbstractSocketProvid) {\n    _inherits(WebsocketProvider, _AbstractSocketProvid);\n\n    function WebsocketProvider(connection, timeout) {\n      var _this;\n\n      _classCallCheck(this, WebsocketProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(WebsocketProvider).call(this, connection, timeout));\n      _this.host = _this.connection.url;\n      return _this;\n    }\n\n    _createClass(WebsocketProvider, [{\n      key: \"onMessage\",\n      value: function onMessage(messageEvent) {\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"onMessage\", this).call(this, messageEvent.data);\n      }\n    }, {\n      key: \"onError\",\n      value: function onError(event) {\n        if (event.code === 'ECONNREFUSED') {\n          this.reconnect();\n          return;\n        }\n\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"onError\", this).call(this, event);\n      }\n    }, {\n      key: \"onClose\",\n      value: function onClose(closeEvent) {\n        if (closeEvent.code !== 1000 || closeEvent.wasClean === false) {\n          this.reconnect();\n          return;\n        }\n\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"onClose\", this).call(this);\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        var _this2 = this;\n\n        setTimeout(function () {\n          _this2.removeAllSocketListeners();\n\n          var connection = [];\n\n          if (_this2.connection.constructor.name === 'W3CWebsocket') {\n            connection = new _this2.connection.constructor(_this2.host, _this2.connection._client.protocol, null, _this2.connection._client.headers, _this2.connection._client.requestOptions, _this2.connection._client.config);\n          } else {\n            connection = new _this2.connection.constructor(_this2.host, _this2.connection.protocol || undefined);\n          }\n\n          _this2.connection = connection;\n\n          _this2.registerEventListeners();\n        }, 5000);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var reason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        this.connection.close(code, reason);\n      }\n    }, {\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.addEventListener('message', this.onMessage.bind(this));\n        this.connection.addEventListener('open', this.onReady.bind(this));\n        this.connection.addEventListener('open', this.onConnect.bind(this));\n        this.connection.addEventListener('close', this.onClose.bind(this));\n        this.connection.addEventListener('error', this.onError.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_MESSAGE:\n            this.connection.removeEventListener('message', this.onMessage);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeEventListener('open', this.onReady);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeEventListener('close', this.onClose);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeEventListener('error', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeEventListener('connect', this.onConnect);\n            break;\n        }\n\n        _get(_getPrototypeOf(WebsocketProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"isConnecting\",\n      value: function isConnecting() {\n        return this.connection.readyState === this.connection.CONNECTING;\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.once('error', reject);\n\n          if (!_this3.isConnecting()) {\n            var timeout, id;\n\n            if (_this3.connection.readyState !== _this3.connection.OPEN) {\n              return reject(new Error('Connection error: Connection is not open on send()'));\n            }\n\n            try {\n              _this3.connection.send(JSON.stringify(payload));\n            } catch (error) {\n              reject(error);\n            }\n\n            if (_this3.timeout) {\n              timeout = setTimeout(function () {\n                reject(new Error('Connection error: Timeout exceeded'));\n              }, _this3.timeout);\n            }\n\n            if (isArray(payload)) {\n              id = payload[0].id;\n            } else {\n              id = payload.id;\n            }\n\n            _this3.once(id, function (response) {\n              if (timeout) {\n                clearTimeout(timeout);\n              }\n\n              return resolve(response);\n            });\n\n            return;\n          }\n\n          _this3.once('connect', function () {\n            _this3.sendPayload(payload).then(resolve).catch(reject);\n          });\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return this.connection.readyState === this.connection.OPEN;\n      }\n    }]);\n\n    return WebsocketProvider;\n  }(AbstractSocketProvider);\n\n  var IpcProvider = function (_AbstractSocketProvid) {\n    _inherits(IpcProvider, _AbstractSocketProvid);\n\n    function IpcProvider(connection, path) {\n      var _this;\n\n      _classCallCheck(this, IpcProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(IpcProvider).call(this, connection, null));\n      _this.host = path;\n      _this.lastChunk = '';\n      return _this;\n    }\n\n    _createClass(IpcProvider, [{\n      key: \"disconnect\",\n      value: function disconnect() {\n        this.connection.destroy();\n      }\n    }, {\n      key: \"reconnect\",\n      value: function reconnect() {\n        this.connection.connect({\n          path: this.path\n        });\n      }\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(message) {\n        var _this2 = this;\n\n        var result = null;\n        var returnValues = [];\n        var dechunkedData = message.toString().replace(/\\}[\\n\\r]?\\{/g, '}|--|{').replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{').replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{').replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{').split('|--|');\n        dechunkedData.forEach(function (data) {\n          result = null;\n\n          if (_this2.lastChunk) {\n            data = _this2.lastChunk + data;\n          }\n\n          try {\n            result = JSON.parse(data);\n          } catch (error) {\n            _this2.lastChunk = data;\n            return;\n          }\n\n          _this2.lastChunk = null;\n          returnValues.push(result);\n        });\n        returnValues.forEach(function (chunk) {\n          _get(_getPrototypeOf(IpcProvider.prototype), \"onMessage\", _this2).call(_this2, chunk);\n        });\n      }\n    }, {\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('data', this.onMessage.bind(this));\n        this.connection.on('connect', this.onConnect.bind(this));\n        this.connection.on('error', this.onError.bind(this));\n        this.connection.on('close', this.onClose.bind(this));\n        this.connection.on('timeout', this.onClose.bind(this));\n        this.connection.on('ready', this.onReady.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('data', this.onMessage);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeListener('ready', this.onReady);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeListener('close', this.onClose);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('error', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n        }\n\n        _get(_getPrototypeOf(IpcProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this3 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this3.once('error', reject);\n\n          if (!_this3.connection.writable) {\n            _this3.connection.connect({\n              path: _this3.path\n            });\n          }\n\n          if (_this3.connection.write(JSON.stringify(payload))) {\n            var id;\n\n            if (isArray(payload)) {\n              id = payload[0].id;\n            } else {\n              id = payload.id;\n            }\n\n            _this3.once(id, resolve);\n\n            return;\n          }\n\n          return reject(new Error(\"Connection error: Couldn't write on the socket with Socket.write(payload)\"));\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return !this.connection.pending;\n      }\n    }]);\n\n    return IpcProvider;\n  }(AbstractSocketProvider);\n\n  var HttpProvider = function () {\n    function HttpProvider() {\n      var host = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http://localhost:8545';\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var providersModuleFactory = arguments.length > 2 ? arguments[2] : undefined;\n\n      _classCallCheck(this, HttpProvider);\n\n      this.host = host;\n      this.timeout = options.timeout || 0;\n      this.headers = options.headers;\n      this.withCredentials = options.withCredentials || false;\n      this.connected = true;\n      this.providersModuleFactory = providersModuleFactory;\n      this.agent = {};\n      var keepAlive = false;\n\n      if (options.keepAlive === true || options.keepAlive !== false) {\n        keepAlive = true;\n      }\n\n      if (host.substring(0, 5) === 'https') {\n        this.agent['httpsAgent'] = new https.Agent({\n          keepAlive: keepAlive\n        });\n      } else {\n        this.agent['httpAgent'] = new http.Agent({\n          keepAlive: keepAlive\n        });\n      }\n    }\n\n    _createClass(HttpProvider, [{\n      key: \"supportsSubscriptions\",\n      value: function supportsSubscriptions() {\n        return false;\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe() {\n        throw new Error('Subscriptions are not supported with the HttpProvider.');\n      }\n    }, {\n      key: \"unsubscribe\",\n      value: function unsubscribe() {\n        throw new Error('Subscriptions are not supported with the HttpProvider.');\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return true;\n      }\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          var response, validationResult;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n\n                case 2:\n                  response = _context.sent;\n                  validationResult = JsonRpcResponseValidator.validate(response);\n\n                  if (!(validationResult instanceof Error)) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw validationResult;\n\n                case 6:\n                  return _context.abrupt(\"return\", response.result);\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var payload = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n        });\n        return this.sendPayload(payload);\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this = this;\n\n        return new Promise(function (resolve, reject) {\n          var request = _this.providersModuleFactory.createXMLHttpRequest(_this.host, _this.timeout, _this.headers, _this.agent, _this.withCredentials);\n\n          request.onreadystatechange = function () {\n            if (request.readyState !== 0 && request.readyState !== 1) {\n              _this.connected = true;\n            }\n\n            if (request.readyState === 4) {\n              if (request.status === 200) {\n                try {\n                  return resolve(JSON.parse(request.responseText));\n                } catch (error) {\n                  reject(new Error(\"Invalid JSON as response: \".concat(request.responseText)));\n                }\n              }\n\n              if (_this.isInvalidHttpEndpoint(request)) {\n                reject(new Error(\"Connection refused or URL couldn't be resolved: \".concat(_this.host)));\n              }\n\n              if (request.status >= 400 && request.status <= 499) {\n                reject(new Error(\"HttpProvider ERROR: \".concat(request.responseText, \" (code: \").concat(request.status, \")\")));\n              }\n            }\n          };\n\n          request.ontimeout = function () {\n            _this.connected = false;\n            reject(new Error(\"Connection error: Timeout exceeded after \".concat(_this.timeout, \"ms\")));\n          };\n\n          try {\n            request.send(JSON.stringify(payload));\n          } catch (error) {\n            _this.connected = false;\n            reject(error);\n          }\n        });\n      }\n    }, {\n      key: \"isInvalidHttpEndpoint\",\n      value: function isInvalidHttpEndpoint(request) {\n        return request.response === null && request.status === 0;\n      }\n    }]);\n\n    return HttpProvider;\n  }();\n\n  var BatchRequest = function () {\n    function BatchRequest(moduleInstance) {\n      _classCallCheck(this, BatchRequest);\n\n      this.moduleInstance = moduleInstance;\n      this.methods = [];\n    }\n\n    _createClass(BatchRequest, [{\n      key: \"add\",\n      value: function add(method) {\n        if (!isObject(method) && method) {\n          throw new Error('Please provide a object of type AbstractMethod.');\n        }\n\n        this.methods.push(method);\n      }\n    }, {\n      key: \"execute\",\n      value: function execute() {\n        var _this = this;\n\n        return this.moduleInstance.currentProvider.sendBatch(this.methods, this.moduleInstance).then(function (response) {\n          var errors = [];\n\n          _this.methods.forEach(function (method, index) {\n            if (!isArray(response)) {\n              method.callback(new Error(\"BatchRequest error: Response should be of type Array but is: \".concat(_typeof(response))), null);\n              errors.push(\"Response should be of type Array but is: \".concat(_typeof(response)));\n              return;\n            }\n\n            var responseItem = response[index] || null;\n            var validationResult = JsonRpcResponseValidator.validate(responseItem);\n\n            if (validationResult) {\n              try {\n                var mappedResult = method.afterExecution(responseItem.result);\n                response[index] = mappedResult;\n                method.callback(false, mappedResult);\n              } catch (error) {\n                errors.push(error);\n                method.callback(error, null);\n              }\n\n              return;\n            }\n\n            errors.push(validationResult);\n            method.callback(validationResult, null);\n          });\n\n          if (errors.length > 0) {\n            throw new Error(\"BatchRequest error: \".concat(JSON.stringify(errors)));\n          }\n\n          return {\n            methods: _this.methods,\n            response: response\n          };\n        });\n      }\n    }]);\n\n    return BatchRequest;\n  }();\n\n  var Web3EthereumProvider = function (_AbstractSocketProvid) {\n    _inherits(Web3EthereumProvider, _AbstractSocketProvid);\n\n    function Web3EthereumProvider(connection) {\n      var _this;\n\n      _classCallCheck(this, Web3EthereumProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Web3EthereumProvider).call(this, connection, null));\n      _this.host = 'Web3EthereumProvider';\n      return _this;\n    }\n\n    _createClass(Web3EthereumProvider, [{\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('notification', this.onMessage.bind(this));\n        this.connection.on('connect', this.onConnect.bind(this));\n        this.connection.on('connect', this.onReady.bind(this));\n        this.connection.on('close', this.onClose.bind(this));\n        this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n        this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_NETWORK_CHANGED:\n            this.connection.removeListener('networkChanged', this.onNetworkChanged);\n            break;\n\n          case this.SOCKET_ACCOUNTS_CHANGED:\n            this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n            break;\n\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('notification', this.onMessage);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeListener('connect', this.onReady);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeListener('close', this.onClose);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('close', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n        }\n\n        _get(_getPrototypeOf(Web3EthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"removeAllSocketListeners\",\n      value: function removeAllSocketListeners() {\n        this.connection.removeAllListeners();\n      }\n    }, {\n      key: \"onNetworkChanged\",\n      value: function onNetworkChanged(networkId) {\n        this.emit('networkChanged', networkId);\n      }\n    }, {\n      key: \"onAccountsChanged\",\n      value: function onAccountsChanged(accounts) {\n        this.emit('accountsChanged', accounts);\n      }\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(response) {\n        this.emit(this.getSubscriptionEvent(response.subscription), response);\n      }\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          var response, validationResult;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  response = this.connection.send(method, parameters);\n                  validationResult = JsonRpcResponseValidator.validate(response);\n\n                  if (!(validationResult instanceof Error)) {\n                    _context.next = 4;\n                    break;\n                  }\n\n                  throw validationResult;\n\n                case 4:\n                  return _context.abrupt(\"return\", response);\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var _this2 = this;\n\n        var methodCalls = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          methodCalls.push(_this2.connection.send(method.rpcMethod, method.parameters));\n        });\n        return Promise.all(methodCalls);\n      }\n    }]);\n\n    return Web3EthereumProvider;\n  }(AbstractSocketProvider);\n\n  var MetamaskProvider = function (_AbstractSocketProvid) {\n    _inherits(MetamaskProvider, _AbstractSocketProvid);\n\n    function MetamaskProvider(inpageProvider) {\n      var _this;\n\n      _classCallCheck(this, MetamaskProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MetamaskProvider).call(this, inpageProvider, null));\n      _this.host = 'metamask';\n      return _this;\n    }\n\n    _createClass(MetamaskProvider, [{\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n        this.connection.on('networkChanged', this.onReady.bind(this));\n        this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n        this.connection.on('data', this.onMessage.bind(this));\n        this.connection.on('error', this.onError.bind(this));\n      }\n    }, {\n      key: \"onMessage\",\n      value: function onMessage(metamaskParam, payload) {\n        _get(_getPrototypeOf(MetamaskProvider.prototype), \"onMessage\", this).call(this, payload);\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_NETWORK_CHANGED:\n            this.connection.removeListener('networkChanged', this.onNetworkChanged);\n            break;\n\n          case this.SOCKET_ACCOUNTS_CHANGED:\n            this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n            break;\n\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('data', this.onMessage);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('error', this.onError);\n            break;\n        }\n\n        _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"removeAllSocketListeners\",\n      value: function removeAllSocketListeners() {\n        this.connection.removeListener(this.SOCKET_NETWORK_CHANGED, this.onNetworkChanged);\n        this.connection.removeListener(this.SOCKET_ACCOUNTS_CHANGED, this.onAccountsChanged);\n\n        _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllSocketListeners\", this).call(this);\n      }\n    }, {\n      key: \"onNetworkChanged\",\n      value: function onNetworkChanged(networkId) {\n        this.emit('networkChanged', networkId);\n      }\n    }, {\n      key: \"onAccountsChanged\",\n      value: function onAccountsChanged(accounts) {\n        this.emit('accountsChanged', accounts);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return true;\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this2 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this2.connection.send(payload, function (error, response) {\n            _this2.removeAllListeners(payload.id);\n\n            if (!error) {\n              return resolve(response);\n            }\n\n            reject(error);\n          });\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return this.connection.isConnected();\n      }\n    }]);\n\n    return MetamaskProvider;\n  }(AbstractSocketProvider);\n\n  var MistEthereumProvider = function (_AbstractSocketProvid) {\n    _inherits(MistEthereumProvider, _AbstractSocketProvid);\n\n    function MistEthereumProvider(connection) {\n      var _this;\n\n      _classCallCheck(this, MistEthereumProvider);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MistEthereumProvider).call(this, connection, null));\n      _this.host = 'mist';\n      return _this;\n    }\n\n    _createClass(MistEthereumProvider, [{\n      key: \"registerEventListeners\",\n      value: function registerEventListeners() {\n        this.connection.on('data', this.onMessage.bind(this));\n        this.connection.on('error', this.onError.bind(this));\n        this.connection.on('connect', this.onConnect.bind(this));\n        this.connection.on('connect', this.onReady.bind(this));\n        this.connection.on('end', this.onClose.bind(this));\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(event) {\n        switch (event) {\n          case this.SOCKET_MESSAGE:\n            this.connection.removeListener('data', this.onMessage);\n            break;\n\n          case this.SOCKET_ERROR:\n            this.connection.removeListener('error', this.onError);\n            break;\n\n          case this.SOCKET_CONNECT:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n\n          case this.SOCKET_READY:\n            this.connection.removeListener('connect', this.onConnect);\n            break;\n\n          case this.SOCKET_CLOSE:\n            this.connection.removeListener('end', this.onClose);\n            break;\n        }\n\n        _get(_getPrototypeOf(MistEthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        return true;\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this2 = this;\n\n        return new Promise(function (resolve, reject) {\n          _this2.connection.send(payload, function (error, response) {\n            _this2.removeAllListeners(payload.id);\n\n            if (!error) {\n              return resolve(response);\n            }\n\n            reject(error);\n          });\n        });\n      }\n    }, {\n      key: \"connected\",\n      get: function get() {\n        return this.connection.isConnected();\n      }\n    }]);\n\n    return MistEthereumProvider;\n  }(AbstractSocketProvider);\n\n  var CustomProvider = function () {\n    function CustomProvider(connection) {\n      _classCallCheck(this, CustomProvider);\n\n      this.host = 'CustomProvider';\n      this.connection = connection;\n      this.checkConnectionMethods();\n    }\n\n    _createClass(CustomProvider, [{\n      key: \"supportsSubscriptions\",\n      value: function supportsSubscriptions() {\n        return false;\n      }\n    }, {\n      key: \"checkConnectionMethods\",\n      value: function checkConnectionMethods() {\n        if (this.connection.send || this.connection.sendAsync) {\n          return true;\n        }\n\n        throw new Error('Invalid provider injected!');\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe() {\n        throw new Error('Subscriptions are not supported with the CustomProvider.');\n      }\n    }, {\n      key: \"unsubscribe\",\n      value: function unsubscribe() {\n        throw new Error('Subscriptions are not supported with the CustomProvider.');\n      }\n    }, {\n      key: \"send\",\n      value: function () {\n        var _send = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(method, parameters) {\n          var response, validationResult;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n\n                case 2:\n                  response = _context.sent;\n                  validationResult = JsonRpcResponseValidator.validate(response);\n\n                  if (!(validationResult instanceof Error)) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  throw validationResult;\n\n                case 6:\n                  return _context.abrupt(\"return\", response.result);\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function send(_x, _x2) {\n          return _send.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: \"sendBatch\",\n      value: function sendBatch(methods, moduleInstance) {\n        var payload = [];\n        methods.forEach(function (method) {\n          method.beforeExecution(moduleInstance);\n          payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n        });\n        return this.sendPayload(payload);\n      }\n    }, {\n      key: \"sendPayload\",\n      value: function sendPayload(payload) {\n        var _this = this;\n\n        return new Promise(function (resolve, reject) {\n          if (_this.connection.sendAsync) {\n            _this.connection.sendAsync(payload, function (error, response) {\n              if (!error) {\n                resolve(response);\n              }\n\n              reject(error);\n            });\n\n            return;\n          }\n\n          _this.connection.send(payload, function (error, response) {\n            if (!error) {\n              resolve(response);\n            }\n\n            reject(error);\n          });\n        });\n      }\n    }]);\n\n    return CustomProvider;\n  }();\n\n  var ProvidersModuleFactory = function () {\n    function ProvidersModuleFactory() {\n      _classCallCheck(this, ProvidersModuleFactory);\n    }\n\n    _createClass(ProvidersModuleFactory, [{\n      key: \"createBatchRequest\",\n      value: function createBatchRequest(moduleInstance) {\n        return new BatchRequest(moduleInstance);\n      }\n    }, {\n      key: \"createProviderResolver\",\n      value: function createProviderResolver() {\n        return new ProviderResolver(this);\n      }\n    }, {\n      key: \"createHttpProvider\",\n      value: function createHttpProvider(url) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new HttpProvider(url, options, this);\n      }\n    }, {\n      key: \"createXMLHttpRequest\",\n      value: function createXMLHttpRequest(host, timeout, headers, agent, withCredentials) {\n        var request;\n\n        if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n          request = new xhr2Cookies.XMLHttpRequest();\n          request.nodejsSet(agent);\n        } else {\n          request = new XMLHttpRequest();\n        }\n\n        request.open('POST', host, true);\n        request.setRequestHeader('Content-Type', 'application/json');\n        request.timeout = timeout;\n        request.withCredentials = withCredentials;\n\n        if (headers) {\n          headers.forEach(function (header) {\n            request.setRequestHeader(header.name, header.value);\n          });\n        }\n\n        return request;\n      }\n    }, {\n      key: \"createWebsocketProvider\",\n      value: function createWebsocketProvider(url) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var connection = '';\n\n        if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n          var headers = options.headers || {};\n          var urlObject = new URL(url);\n\n          if (!headers.authorization && urlObject.username && urlObject.password) {\n            var authToken = Buffer.from(\"\".concat(urlObject.username, \":\").concat(urlObject.password)).toString('base64');\n            headers.authorization = \"Basic \".concat(authToken);\n          }\n\n          connection = new websocket.w3cwebsocket(url, options.protocol, null, headers, null, options.clientConfig);\n        } else {\n          connection = new window.WebSocket(url, options.protocol);\n        }\n\n        return new WebsocketProvider(connection, options.timeout);\n      }\n    }, {\n      key: \"createIpcProvider\",\n      value: function createIpcProvider(path, net) {\n        return new IpcProvider(net.connect({\n          path: path\n        }), path);\n      }\n    }, {\n      key: \"createWeb3EthereumProvider\",\n      value: function createWeb3EthereumProvider(connection) {\n        return new Web3EthereumProvider(connection);\n      }\n    }, {\n      key: \"createMetamaskProvider\",\n      value: function createMetamaskProvider(inpageProvider) {\n        return new MetamaskProvider(inpageProvider);\n      }\n    }, {\n      key: \"createMistEthereumProvider\",\n      value: function createMistEthereumProvider(mistEthereumProvider) {\n        return new MistEthereumProvider(mistEthereumProvider);\n      }\n    }, {\n      key: \"createCustomProvider\",\n      value: function createCustomProvider(connection) {\n        return new CustomProvider(connection);\n      }\n    }]);\n\n    return ProvidersModuleFactory;\n  }();\n\n  var global$1 = function () {\n    return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n  }() || new Function('return this')();\n\n  var ProviderDetector = function () {\n    function ProviderDetector() {\n      _classCallCheck(this, ProviderDetector);\n    }\n\n    _createClass(ProviderDetector, null, [{\n      key: \"detect\",\n      value: function detect() {\n        if (typeof global$1.ethereumProvider !== 'undefined' && global$1.ethereumProvider.constructor.name === 'EthereumProvider') {\n          return global$1.ethereumProvider;\n        }\n\n        if (typeof global$1.web3 !== 'undefined' && global$1.web3.currentProvider) {\n          return global$1.web3.currentProvider;\n        }\n\n        return null;\n      }\n    }]);\n\n    return ProviderDetector;\n  }();\n\n  function HttpProvider$1(url) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new ProvidersModuleFactory().createHttpProvider(url, options);\n  }\n\n  function WebsocketProvider$1(url) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new ProvidersModuleFactory().createWebsocketProvider(url, options);\n  }\n\n  function IpcProvider$1(path, net) {\n    return new ProvidersModuleFactory().createIpcProvider(path, net);\n  }\n\n  function BatchRequest$1(moduleInstance) {\n    return new ProvidersModuleFactory().createBatchRequest(moduleInstance);\n  }\n\n  function ProviderResolver$1() {\n    return new ProvidersModuleFactory().createProviderResolver();\n  }\n\n  exports.BatchRequest = BatchRequest$1;\n  exports.HttpProvider = HttpProvider$1;\n  exports.IpcProvider = IpcProvider$1;\n  exports.ProviderDetector = ProviderDetector;\n  exports.ProviderResolver = ProviderResolver$1;\n  exports.ProvidersModuleFactory = ProvidersModuleFactory;\n  exports.Web3EthereumProvider = Web3EthereumProvider;\n  exports.WebsocketProvider = WebsocketProvider$1;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/home/luc1d/Code/Github/waviii.io/node_modules/web3-providers/dist/web3-providers.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","Web3Providers","_classCallCheck","_createClass","websocket","xhr2Cookies","URL","_typeof","isFunction","isObject","_possibleConstructorReturn","_getPrototypeOf","_get","_inherits","_regeneratorRuntime","_asyncToGenerator","EventEmitter","isArray","http","https","hasOwnProperty","Function","ProviderResolver","providersModuleFactory","key","value","resolve","provider","net","test","createHttpProvider","createWebsocketProvider","connect","createIpcProvider","sendPayload","subscribe","mist","constructor","name","createMistEthereumProvider","isEIP1193","createWeb3EthereumProvider","isMetamaskInpageProvider","createMetamaskProvider","createCustomProvider","messageId","JsonRpcMapper","toPayload","method","params","Error","concat","JSON","stringify","id","jsonrpc","JsonRpcResponseValidator","validate","response","payload","arguments","length","undefined","error","message","result","AbstractSocketProvider","_EventEmitter","connection","timeout","_this","call","subscriptions","registerEventListeners","READY","CONNECT","ERROR","CLOSE","SOCKET_MESSAGE","SOCKET_READY","SOCKET_CLOSE","SOCKET_ERROR","SOCKET_CONNECT","SOCKET_NETWORK_CHANGED","SOCKET_ACCOUNTS_CHANGED","supportsSubscriptions","removeAllSocketListeners","removeAllListeners","disconnect","code","reason","_send","mark","_callee","parameters","validationResult","wrap","_callee$","_context","prev","next","sent","abrupt","stop","send","_x","_x2","apply","sendBatch","methods","moduleInstance","forEach","beforeExecution","push","rpcMethod","onReady","event","emit","onError","onClose","_onConnect","_callee2","subscriptionKeys","subscriptionId","_i","_subscriptionKeys","_callee2$","_context2","Object","keys","subscribeMethod","slice","onConnect","onMessage","parse","getSubscriptionEvent","subscription","reset","_this2","subscriptionMethod","unshift","then","catch","unsubscribe","_this3","unsubscribeMethod","hasSubscription","Promise","reject","clearSubscriptions","_this4","unsubscribePromises","all","results","includes","_this5","get","WebsocketProvider","_AbstractSocketProvid","host","url","messageEvent","prototype","data","reconnect","closeEvent","wasClean","setTimeout","_client","protocol","headers","requestOptions","config","close","addEventListener","bind","removeEventListener","isConnecting","readyState","CONNECTING","once","OPEN","clearTimeout","IpcProvider","path","lastChunk","destroy","returnValues","dechunkedData","toString","replace","split","chunk","on","removeListener","writable","write","pending","HttpProvider","options","withCredentials","connected","agent","keepAlive","substring","Agent","request","createXMLHttpRequest","onreadystatechange","status","responseText","isInvalidHttpEndpoint","ontimeout","BatchRequest","add","execute","currentProvider","errors","index","callback","responseItem","mappedResult","afterExecution","Web3EthereumProvider","onNetworkChanged","onAccountsChanged","networkId","accounts","methodCalls","MetamaskProvider","inpageProvider","metamaskParam","isConnected","MistEthereumProvider","CustomProvider","checkConnectionMethods","sendAsync","ProvidersModuleFactory","createBatchRequest","createProviderResolver","process","versions","node","XMLHttpRequest","nodejsSet","open","setRequestHeader","header","urlObject","authorization","username","password","authToken","Buffer","from","w3cwebsocket","clientConfig","window","WebSocket","mistEthereumProvider","global$1","ProviderDetector","detect","ethereumProvider","web3","HttpProvider$1","WebsocketProvider$1","IpcProvider$1","BatchRequest$1","ProviderResolver$1","defineProperty"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass'), require('websocket'), require('xhr2-cookies'), require('url-parse'), require('@babel/runtime/helpers/typeof'), require('lodash/isFunction'), require('lodash/isObject'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/get'), require('@babel/runtime/helpers/inherits'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('eventemitter3'), require('lodash/isArray'), require('http'), require('https')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass', 'websocket', 'xhr2-cookies', 'url-parse', '@babel/runtime/helpers/typeof', 'lodash/isFunction', 'lodash/isObject', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/get', '@babel/runtime/helpers/inherits', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', 'eventemitter3', 'lodash/isArray', 'http', 'https'], factory) :\n    (global = global || self, factory(global.Web3Providers = {}, global._classCallCheck, global._createClass, global.websocket, global.xhr2Cookies, global.URL, global._typeof, global.isFunction, global.isObject, global._possibleConstructorReturn, global._getPrototypeOf, global._get, global._inherits, global._regeneratorRuntime, global._asyncToGenerator, global.EventEmitter, global.isArray, global.http, global.https));\n}(this, function (exports, _classCallCheck, _createClass, websocket, xhr2Cookies, URL, _typeof, isFunction, isObject, _possibleConstructorReturn, _getPrototypeOf, _get, _inherits, _regeneratorRuntime, _asyncToGenerator, EventEmitter, isArray, http, https) { 'use strict';\n\n    _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n    _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n    URL = URL && URL.hasOwnProperty('default') ? URL['default'] : URL;\n    _typeof = _typeof && _typeof.hasOwnProperty('default') ? _typeof['default'] : _typeof;\n    isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n    isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n    _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n    _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n    _get = _get && _get.hasOwnProperty('default') ? _get['default'] : _get;\n    _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n    _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n    _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n    EventEmitter = EventEmitter && EventEmitter.hasOwnProperty('default') ? EventEmitter['default'] : EventEmitter;\n    isArray = isArray && isArray.hasOwnProperty('default') ? isArray['default'] : isArray;\n    http = http && http.hasOwnProperty('default') ? http['default'] : http;\n    https = https && https.hasOwnProperty('default') ? https['default'] : https;\n\n    var global = function () {\n      return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n    }() || new Function('return this')();\n    var ProviderResolver =\n    function () {\n      function ProviderResolver(providersModuleFactory) {\n        _classCallCheck(this, ProviderResolver);\n        this.providersModuleFactory = providersModuleFactory;\n      }\n      _createClass(ProviderResolver, [{\n        key: \"resolve\",\n        value: function resolve(provider, net) {\n          if (!provider) {\n            return provider;\n          }\n          if (typeof provider === 'string') {\n            if (/^http(s)?:\\/\\//i.test(provider)) {\n              return this.providersModuleFactory.createHttpProvider(provider);\n            }\n            if (/^ws(s)?:\\/\\//i.test(provider)) {\n              return this.providersModuleFactory.createWebsocketProvider(provider);\n            }\n            if (provider && isObject(net) && isFunction(net.connect)) {\n              return this.providersModuleFactory.createIpcProvider(provider, net);\n            }\n          }\n          if (provider.sendPayload && provider.subscribe) {\n            return provider;\n          }\n          if (typeof global.mist !== 'undefined' && provider.constructor.name === 'EthereumProvider') {\n            return this.providersModuleFactory.createMistEthereumProvider(provider);\n          }\n          if (provider.isEIP1193) {\n            return this.providersModuleFactory.createWeb3EthereumProvider(provider);\n          }\n          if (this.isMetamaskInpageProvider(provider)) {\n            return this.providersModuleFactory.createMetamaskProvider(provider);\n          }\n          return this.providersModuleFactory.createCustomProvider(provider);\n        }\n      }, {\n        key: \"isMetamaskInpageProvider\",\n        value: function isMetamaskInpageProvider(provider) {\n          return provider.constructor.name === 'MetamaskInpageProvider';\n        }\n      }]);\n      return ProviderResolver;\n    }();\n\n    var messageId = 0;\n    var JsonRpcMapper =\n    function () {\n      function JsonRpcMapper() {\n        _classCallCheck(this, JsonRpcMapper);\n      }\n      _createClass(JsonRpcMapper, null, [{\n        key: \"toPayload\",\n        value: function toPayload(method, params) {\n          if (!method) {\n            throw new Error(\"JSONRPC method should be specified for params: \\\"\".concat(JSON.stringify(params), \"\\\"!\"));\n          }\n          var id = messageId;\n          messageId++;\n          return {\n            jsonrpc: '2.0',\n            id: id,\n            method: method,\n            params: params || []\n          };\n        }\n      }]);\n      return JsonRpcMapper;\n    }();\n\n    var JsonRpcResponseValidator =\n    function () {\n      function JsonRpcResponseValidator() {\n        _classCallCheck(this, JsonRpcResponseValidator);\n      }\n      _createClass(JsonRpcResponseValidator, null, [{\n        key: \"validate\",\n        value: function validate(response) {\n          var payload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          if (isObject(response)) {\n            if (response.error) {\n              if (response.error instanceof Error) {\n                return new Error(\"Node error: \".concat(response.error.message));\n              }\n              return new Error(\"Node error: \".concat(JSON.stringify(response.error)));\n            }\n            if (payload && response.id !== payload.id) {\n              return new Error(\"Validation error: Invalid JSON-RPC response ID (request: \".concat(payload.id, \" / response: \").concat(response.id, \")\"));\n            }\n            if (response.result === undefined) {\n              return new Error('Validation error: Undefined JSON-RPC result');\n            }\n            return true;\n          }\n          return new Error('Validation error: Response should be of type Object');\n        }\n      }]);\n      return JsonRpcResponseValidator;\n    }();\n\n    var AbstractSocketProvider =\n    function (_EventEmitter) {\n      _inherits(AbstractSocketProvider, _EventEmitter);\n      function AbstractSocketProvider(connection, timeout) {\n        var _this;\n        _classCallCheck(this, AbstractSocketProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AbstractSocketProvider).call(this));\n        _this.connection = connection;\n        _this.timeout = timeout;\n        _this.subscriptions = {};\n        _this.registerEventListeners();\n        _this.READY = 'ready';\n        _this.CONNECT = 'connect';\n        _this.ERROR = 'error';\n        _this.CLOSE = 'close';\n        _this.SOCKET_MESSAGE = 'socket_message';\n        _this.SOCKET_READY = 'socket_ready';\n        _this.SOCKET_CLOSE = 'socket_close';\n        _this.SOCKET_ERROR = 'socket_error';\n        _this.SOCKET_CONNECT = 'socket_connect';\n        _this.SOCKET_NETWORK_CHANGED = 'socket_networkChanged';\n        _this.SOCKET_ACCOUNTS_CHANGED = 'socket_accountsChanged';\n        return _this;\n      }\n      _createClass(AbstractSocketProvider, [{\n        key: \"supportsSubscriptions\",\n        value: function supportsSubscriptions() {\n          return true;\n        }\n      }, {\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {}\n      }, {\n        key: \"removeAllSocketListeners\",\n        value: function removeAllSocketListeners() {\n          this.removeAllListeners(this.SOCKET_MESSAGE);\n          this.removeAllListeners(this.SOCKET_READY);\n          this.removeAllListeners(this.SOCKET_CLOSE);\n          this.removeAllListeners(this.SOCKET_ERROR);\n          this.removeAllListeners(this.SOCKET_CONNECT);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect(code, reason) {}\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            var response, validationResult;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n                  case 2:\n                    response = _context.sent;\n                    validationResult = JsonRpcResponseValidator.validate(response);\n                    if (!(validationResult instanceof Error)) {\n                      _context.next = 6;\n                      break;\n                    }\n                    throw validationResult;\n                  case 6:\n                    return _context.abrupt(\"return\", response.result);\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var payload = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n          });\n          return this.sendPayload(payload);\n        }\n      }, {\n        key: \"onReady\",\n        value: function onReady(event) {\n          this.emit(this.READY, event);\n          this.emit(this.SOCKET_READY, event);\n        }\n      }, {\n        key: \"onError\",\n        value: function onError(error) {\n          this.emit(this.ERROR, error);\n          this.emit(this.SOCKET_ERROR, error);\n          this.removeAllSocketListeners();\n          this.removeAllListeners();\n        }\n      }, {\n        key: \"onClose\",\n        value: function onClose() {\n          var error = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          this.emit(this.CLOSE, error);\n          this.emit(this.SOCKET_CLOSE, error);\n          this.removeAllSocketListeners();\n          this.removeAllListeners();\n        }\n      }, {\n        key: \"onConnect\",\n        value: function () {\n          var _onConnect = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee2() {\n            var subscriptionKeys, subscriptionId, _i, _subscriptionKeys, key;\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    subscriptionKeys = Object.keys(this.subscriptions);\n                    if (!(subscriptionKeys.length > 0)) {\n                      _context2.next = 13;\n                      break;\n                    }\n                    _i = 0, _subscriptionKeys = subscriptionKeys;\n                  case 3:\n                    if (!(_i < _subscriptionKeys.length)) {\n                      _context2.next = 13;\n                      break;\n                    }\n                    key = _subscriptionKeys[_i];\n                    _context2.next = 7;\n                    return this.subscribe(this.subscriptions[key].subscribeMethod, this.subscriptions[key].parameters[0], this.subscriptions[key].parameters.slice(1));\n                  case 7:\n                    subscriptionId = _context2.sent;\n                    delete this.subscriptions[subscriptionId];\n                    this.subscriptions[key].id = subscriptionId;\n                  case 10:\n                    _i++;\n                    _context2.next = 3;\n                    break;\n                  case 13:\n                    this.emit(this.SOCKET_CONNECT);\n                    this.emit(this.CONNECT);\n                  case 15:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, this);\n          }));\n          function onConnect() {\n            return _onConnect.apply(this, arguments);\n          }\n          return onConnect;\n        }()\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(response) {\n          var event;\n          if (!isObject(response)) {\n            response = JSON.parse(response);\n          }\n          if (isArray(response)) {\n            event = response[0].id;\n          } else if (typeof response.id === 'undefined') {\n            event = this.getSubscriptionEvent(response.params.subscription);\n            response = response.params;\n          } else {\n            event = response.id;\n          }\n          this.emit(this.SOCKET_MESSAGE, response);\n          this.emit(event, response);\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this.removeAllListeners();\n          this.registerEventListeners();\n        }\n      }, {\n        key: \"subscribe\",\n        value: function subscribe() {\n          var _this2 = this;\n          var subscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_subscribe';\n          var subscriptionMethod = arguments.length > 1 ? arguments[1] : undefined;\n          var parameters = arguments.length > 2 ? arguments[2] : undefined;\n          parameters.unshift(subscriptionMethod);\n          return this.send(subscribeMethod, parameters).then(function (subscriptionId) {\n            _this2.subscriptions[subscriptionId] = {\n              id: subscriptionId,\n              subscribeMethod: subscribeMethod,\n              parameters: parameters\n            };\n            return subscriptionId;\n          }).catch(function (error) {\n            throw new Error(\"Provider error: \".concat(error));\n          });\n        }\n      }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe(subscriptionId) {\n          var _this3 = this;\n          var unsubscribeMethod = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'eth_unsubscribe';\n          if (this.hasSubscription(subscriptionId)) {\n            return this.send(unsubscribeMethod, [subscriptionId]).then(function (response) {\n              if (response) {\n                _this3.removeAllListeners(_this3.getSubscriptionEvent(subscriptionId));\n                delete _this3.subscriptions[subscriptionId];\n              }\n              return response;\n            });\n          }\n          return Promise.reject(new Error(\"Provider error: Subscription with ID \".concat(subscriptionId, \" does not exist.\")));\n        }\n      }, {\n        key: \"clearSubscriptions\",\n        value: function clearSubscriptions() {\n          var _this4 = this;\n          var unsubscribeMethod = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'eth_unsubscribe';\n          var unsubscribePromises = [];\n          Object.keys(this.subscriptions).forEach(function (key) {\n            _this4.removeAllListeners(key);\n            unsubscribePromises.push(_this4.unsubscribe(_this4.subscriptions[key].id, unsubscribeMethod));\n          });\n          return Promise.all(unsubscribePromises).then(function (results) {\n            if (results.includes(false)) {\n              throw new Error(\"Could not unsubscribe all subscriptions: \".concat(JSON.stringify(results)));\n            }\n            return true;\n          });\n        }\n      }, {\n        key: \"hasSubscription\",\n        value: function hasSubscription(subscriptionId) {\n          return typeof this.getSubscriptionEvent(subscriptionId) !== 'undefined';\n        }\n      }, {\n        key: \"getSubscriptionEvent\",\n        value: function getSubscriptionEvent(subscriptionId) {\n          var _this5 = this;\n          if (this.subscriptions[subscriptionId]) {\n            return subscriptionId;\n          }\n          var event;\n          Object.keys(this.subscriptions).forEach(function (key) {\n            if (_this5.subscriptions[key].id === subscriptionId) {\n              event = key;\n            }\n          });\n          return event;\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {}\n      }]);\n      return AbstractSocketProvider;\n    }(EventEmitter);\n\n    var WebsocketProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(WebsocketProvider, _AbstractSocketProvid);\n      function WebsocketProvider(connection, timeout) {\n        var _this;\n        _classCallCheck(this, WebsocketProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(WebsocketProvider).call(this, connection, timeout));\n        _this.host = _this.connection.url;\n        return _this;\n      }\n      _createClass(WebsocketProvider, [{\n        key: \"onMessage\",\n        value: function onMessage(messageEvent) {\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"onMessage\", this).call(this, messageEvent.data);\n        }\n      }, {\n        key: \"onError\",\n        value: function onError(event) {\n          if (event.code === 'ECONNREFUSED') {\n            this.reconnect();\n            return;\n          }\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"onError\", this).call(this, event);\n        }\n      }, {\n        key: \"onClose\",\n        value: function onClose(closeEvent) {\n          if (closeEvent.code !== 1000 || closeEvent.wasClean === false) {\n            this.reconnect();\n            return;\n          }\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"onClose\", this).call(this);\n        }\n      }, {\n        key: \"reconnect\",\n        value: function reconnect() {\n          var _this2 = this;\n          setTimeout(function () {\n            _this2.removeAllSocketListeners();\n            var connection = [];\n            if (_this2.connection.constructor.name === 'W3CWebsocket') {\n              connection = new _this2.connection.constructor(_this2.host, _this2.connection._client.protocol, null, _this2.connection._client.headers, _this2.connection._client.requestOptions, _this2.connection._client.config);\n            } else {\n              connection = new _this2.connection.constructor(_this2.host, _this2.connection.protocol || undefined);\n            }\n            _this2.connection = connection;\n            _this2.registerEventListeners();\n          }, 5000);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          var reason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          this.connection.close(code, reason);\n        }\n      }, {\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.addEventListener('message', this.onMessage.bind(this));\n          this.connection.addEventListener('open', this.onReady.bind(this));\n          this.connection.addEventListener('open', this.onConnect.bind(this));\n          this.connection.addEventListener('close', this.onClose.bind(this));\n          this.connection.addEventListener('error', this.onError.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_MESSAGE:\n              this.connection.removeEventListener('message', this.onMessage);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeEventListener('open', this.onReady);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeEventListener('close', this.onClose);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeEventListener('error', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeEventListener('connect', this.onConnect);\n              break;\n          }\n          _get(_getPrototypeOf(WebsocketProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"isConnecting\",\n        value: function isConnecting() {\n          return this.connection.readyState === this.connection.CONNECTING;\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this3 = this;\n          return new Promise(function (resolve, reject) {\n            _this3.once('error', reject);\n            if (!_this3.isConnecting()) {\n              var timeout, id;\n              if (_this3.connection.readyState !== _this3.connection.OPEN) {\n                return reject(new Error('Connection error: Connection is not open on send()'));\n              }\n              try {\n                _this3.connection.send(JSON.stringify(payload));\n              } catch (error) {\n                reject(error);\n              }\n              if (_this3.timeout) {\n                timeout = setTimeout(function () {\n                  reject(new Error('Connection error: Timeout exceeded'));\n                }, _this3.timeout);\n              }\n              if (isArray(payload)) {\n                id = payload[0].id;\n              } else {\n                id = payload.id;\n              }\n              _this3.once(id, function (response) {\n                if (timeout) {\n                  clearTimeout(timeout);\n                }\n                return resolve(response);\n              });\n              return;\n            }\n            _this3.once('connect', function () {\n              _this3.sendPayload(payload).then(resolve).catch(reject);\n            });\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return this.connection.readyState === this.connection.OPEN;\n        }\n      }]);\n      return WebsocketProvider;\n    }(AbstractSocketProvider);\n\n    var IpcProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(IpcProvider, _AbstractSocketProvid);\n      function IpcProvider(connection, path) {\n        var _this;\n        _classCallCheck(this, IpcProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(IpcProvider).call(this, connection, null));\n        _this.host = path;\n        _this.lastChunk = '';\n        return _this;\n      }\n      _createClass(IpcProvider, [{\n        key: \"disconnect\",\n        value: function disconnect() {\n          this.connection.destroy();\n        }\n      }, {\n        key: \"reconnect\",\n        value: function reconnect() {\n          this.connection.connect({\n            path: this.path\n          });\n        }\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(message) {\n          var _this2 = this;\n          var result = null;\n          var returnValues = [];\n          var dechunkedData = message.toString().replace(/\\}[\\n\\r]?\\{/g, '}|--|{')\n          .replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{')\n          .replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{')\n          .replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{')\n          .split('|--|');\n          dechunkedData.forEach(function (data) {\n            result = null;\n            if (_this2.lastChunk) {\n              data = _this2.lastChunk + data;\n            }\n            try {\n              result = JSON.parse(data);\n            } catch (error) {\n              _this2.lastChunk = data;\n              return;\n            }\n            _this2.lastChunk = null;\n            returnValues.push(result);\n          });\n          returnValues.forEach(function (chunk) {\n            _get(_getPrototypeOf(IpcProvider.prototype), \"onMessage\", _this2).call(_this2, chunk);\n          });\n        }\n      }, {\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('data', this.onMessage.bind(this));\n          this.connection.on('connect', this.onConnect.bind(this));\n          this.connection.on('error', this.onError.bind(this));\n          this.connection.on('close', this.onClose.bind(this));\n          this.connection.on('timeout', this.onClose.bind(this));\n          this.connection.on('ready', this.onReady.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('data', this.onMessage);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeListener('ready', this.onReady);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeListener('close', this.onClose);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('error', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n          }\n          _get(_getPrototypeOf(IpcProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this3 = this;\n          return new Promise(function (resolve, reject) {\n            _this3.once('error', reject);\n            if (!_this3.connection.writable) {\n              _this3.connection.connect({\n                path: _this3.path\n              });\n            }\n            if (_this3.connection.write(JSON.stringify(payload))) {\n              var id;\n              if (isArray(payload)) {\n                id = payload[0].id;\n              } else {\n                id = payload.id;\n              }\n              _this3.once(id, resolve);\n              return;\n            }\n            return reject(new Error(\"Connection error: Couldn't write on the socket with Socket.write(payload)\"));\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return !this.connection.pending;\n        }\n      }]);\n      return IpcProvider;\n    }(AbstractSocketProvider);\n\n    var HttpProvider =\n    function () {\n      function HttpProvider() {\n        var host = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http://localhost:8545';\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var providersModuleFactory = arguments.length > 2 ? arguments[2] : undefined;\n        _classCallCheck(this, HttpProvider);\n        this.host = host;\n        this.timeout = options.timeout || 0;\n        this.headers = options.headers;\n        this.withCredentials = options.withCredentials || false;\n        this.connected = true;\n        this.providersModuleFactory = providersModuleFactory;\n        this.agent = {};\n        var keepAlive = false;\n        if (options.keepAlive === true || options.keepAlive !== false) {\n          keepAlive = true;\n        }\n        if (host.substring(0, 5) === 'https') {\n          this.agent['httpsAgent'] = new https.Agent({\n            keepAlive: keepAlive\n          });\n        } else {\n          this.agent['httpAgent'] = new http.Agent({\n            keepAlive: keepAlive\n          });\n        }\n      }\n      _createClass(HttpProvider, [{\n        key: \"supportsSubscriptions\",\n        value: function supportsSubscriptions() {\n          return false;\n        }\n      }, {\n        key: \"subscribe\",\n        value: function subscribe() {\n          throw new Error('Subscriptions are not supported with the HttpProvider.');\n        }\n      }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe() {\n          throw new Error('Subscriptions are not supported with the HttpProvider.');\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          return true;\n        }\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            var response, validationResult;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n                  case 2:\n                    response = _context.sent;\n                    validationResult = JsonRpcResponseValidator.validate(response);\n                    if (!(validationResult instanceof Error)) {\n                      _context.next = 6;\n                      break;\n                    }\n                    throw validationResult;\n                  case 6:\n                    return _context.abrupt(\"return\", response.result);\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var payload = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n          });\n          return this.sendPayload(payload);\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this = this;\n          return new Promise(function (resolve, reject) {\n            var request = _this.providersModuleFactory.createXMLHttpRequest(_this.host, _this.timeout, _this.headers, _this.agent, _this.withCredentials);\n            request.onreadystatechange = function () {\n              if (request.readyState !== 0 && request.readyState !== 1) {\n                _this.connected = true;\n              }\n              if (request.readyState === 4) {\n                if (request.status === 200) {\n                  try {\n                    return resolve(JSON.parse(request.responseText));\n                  } catch (error) {\n                    reject(new Error(\"Invalid JSON as response: \".concat(request.responseText)));\n                  }\n                }\n                if (_this.isInvalidHttpEndpoint(request)) {\n                  reject(new Error(\"Connection refused or URL couldn't be resolved: \".concat(_this.host)));\n                }\n                if (request.status >= 400 && request.status <= 499) {\n                  reject(new Error(\"HttpProvider ERROR: \".concat(request.responseText, \" (code: \").concat(request.status, \")\")));\n                }\n              }\n            };\n            request.ontimeout = function () {\n              _this.connected = false;\n              reject(new Error(\"Connection error: Timeout exceeded after \".concat(_this.timeout, \"ms\")));\n            };\n            try {\n              request.send(JSON.stringify(payload));\n            } catch (error) {\n              _this.connected = false;\n              reject(error);\n            }\n          });\n        }\n      }, {\n        key: \"isInvalidHttpEndpoint\",\n        value: function isInvalidHttpEndpoint(request) {\n          return request.response === null && request.status === 0;\n        }\n      }]);\n      return HttpProvider;\n    }();\n\n    var BatchRequest =\n    function () {\n      function BatchRequest(moduleInstance) {\n        _classCallCheck(this, BatchRequest);\n        this.moduleInstance = moduleInstance;\n        this.methods = [];\n      }\n      _createClass(BatchRequest, [{\n        key: \"add\",\n        value: function add(method) {\n          if (!isObject(method) && method) {\n            throw new Error('Please provide a object of type AbstractMethod.');\n          }\n          this.methods.push(method);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this = this;\n          return this.moduleInstance.currentProvider.sendBatch(this.methods, this.moduleInstance).then(function (response) {\n            var errors = [];\n            _this.methods.forEach(function (method, index) {\n              if (!isArray(response)) {\n                method.callback(new Error(\"BatchRequest error: Response should be of type Array but is: \".concat(_typeof(response))), null);\n                errors.push(\"Response should be of type Array but is: \".concat(_typeof(response)));\n                return;\n              }\n              var responseItem = response[index] || null;\n              var validationResult = JsonRpcResponseValidator.validate(responseItem);\n              if (validationResult) {\n                try {\n                  var mappedResult = method.afterExecution(responseItem.result);\n                  response[index] = mappedResult;\n                  method.callback(false, mappedResult);\n                } catch (error) {\n                  errors.push(error);\n                  method.callback(error, null);\n                }\n                return;\n              }\n              errors.push(validationResult);\n              method.callback(validationResult, null);\n            });\n            if (errors.length > 0) {\n              throw new Error(\"BatchRequest error: \".concat(JSON.stringify(errors)));\n            }\n            return {\n              methods: _this.methods,\n              response: response\n            };\n          });\n        }\n      }]);\n      return BatchRequest;\n    }();\n\n    var Web3EthereumProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(Web3EthereumProvider, _AbstractSocketProvid);\n      function Web3EthereumProvider(connection) {\n        var _this;\n        _classCallCheck(this, Web3EthereumProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Web3EthereumProvider).call(this, connection, null));\n        _this.host = 'Web3EthereumProvider';\n        return _this;\n      }\n      _createClass(Web3EthereumProvider, [{\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('notification', this.onMessage.bind(this));\n          this.connection.on('connect', this.onConnect.bind(this));\n          this.connection.on('connect', this.onReady.bind(this));\n          this.connection.on('close', this.onClose.bind(this));\n          this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n          this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_NETWORK_CHANGED:\n              this.connection.removeListener('networkChanged', this.onNetworkChanged);\n              break;\n            case this.SOCKET_ACCOUNTS_CHANGED:\n              this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n              break;\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('notification', this.onMessage);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeListener('connect', this.onReady);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeListener('close', this.onClose);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('close', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n          }\n          _get(_getPrototypeOf(Web3EthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"removeAllSocketListeners\",\n        value: function removeAllSocketListeners() {\n          this.connection.removeAllListeners();\n        }\n      }, {\n        key: \"onNetworkChanged\",\n        value: function onNetworkChanged(networkId) {\n          this.emit('networkChanged', networkId);\n        }\n      }, {\n        key: \"onAccountsChanged\",\n        value: function onAccountsChanged(accounts) {\n          this.emit('accountsChanged', accounts);\n        }\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(response) {\n          this.emit(this.getSubscriptionEvent(response.subscription), response);\n        }\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            var response, validationResult;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    response = this.connection.send(method, parameters);\n                    validationResult = JsonRpcResponseValidator.validate(response);\n                    if (!(validationResult instanceof Error)) {\n                      _context.next = 4;\n                      break;\n                    }\n                    throw validationResult;\n                  case 4:\n                    return _context.abrupt(\"return\", response);\n                  case 5:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var _this2 = this;\n          var methodCalls = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            methodCalls.push(_this2.connection.send(method.rpcMethod, method.parameters));\n          });\n          return Promise.all(methodCalls);\n        }\n      }]);\n      return Web3EthereumProvider;\n    }(AbstractSocketProvider);\n\n    var MetamaskProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(MetamaskProvider, _AbstractSocketProvid);\n      function MetamaskProvider(inpageProvider) {\n        var _this;\n        _classCallCheck(this, MetamaskProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MetamaskProvider).call(this, inpageProvider, null));\n        _this.host = 'metamask';\n        return _this;\n      }\n      _createClass(MetamaskProvider, [{\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('accountsChanged', this.onAccountsChanged.bind(this));\n          this.connection.on('networkChanged', this.onReady.bind(this));\n          this.connection.on('networkChanged', this.onNetworkChanged.bind(this));\n          this.connection.on('data', this.onMessage.bind(this));\n          this.connection.on('error', this.onError.bind(this));\n        }\n      }, {\n        key: \"onMessage\",\n        value: function onMessage(metamaskParam, payload) {\n          _get(_getPrototypeOf(MetamaskProvider.prototype), \"onMessage\", this).call(this, payload);\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_NETWORK_CHANGED:\n              this.connection.removeListener('networkChanged', this.onNetworkChanged);\n              break;\n            case this.SOCKET_ACCOUNTS_CHANGED:\n              this.connection.removeListener('accountsChanged', this.onAccountsChanged);\n              break;\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('data', this.onMessage);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('error', this.onError);\n              break;\n          }\n          _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"removeAllSocketListeners\",\n        value: function removeAllSocketListeners() {\n          this.connection.removeListener(this.SOCKET_NETWORK_CHANGED, this.onNetworkChanged);\n          this.connection.removeListener(this.SOCKET_ACCOUNTS_CHANGED, this.onAccountsChanged);\n          _get(_getPrototypeOf(MetamaskProvider.prototype), \"removeAllSocketListeners\", this).call(this);\n        }\n      }, {\n        key: \"onNetworkChanged\",\n        value: function onNetworkChanged(networkId) {\n          this.emit('networkChanged', networkId);\n        }\n      }, {\n        key: \"onAccountsChanged\",\n        value: function onAccountsChanged(accounts) {\n          this.emit('accountsChanged', accounts);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          return true;\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this2 = this;\n          return new Promise(function (resolve, reject) {\n            _this2.connection.send(payload, function (error, response) {\n              _this2.removeAllListeners(payload.id);\n              if (!error) {\n                return resolve(response);\n              }\n              reject(error);\n            });\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return this.connection.isConnected();\n        }\n      }]);\n      return MetamaskProvider;\n    }(AbstractSocketProvider);\n\n    var MistEthereumProvider =\n    function (_AbstractSocketProvid) {\n      _inherits(MistEthereumProvider, _AbstractSocketProvid);\n      function MistEthereumProvider(connection) {\n        var _this;\n        _classCallCheck(this, MistEthereumProvider);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MistEthereumProvider).call(this, connection, null));\n        _this.host = 'mist';\n        return _this;\n      }\n      _createClass(MistEthereumProvider, [{\n        key: \"registerEventListeners\",\n        value: function registerEventListeners() {\n          this.connection.on('data', this.onMessage.bind(this));\n          this.connection.on('error', this.onError.bind(this));\n          this.connection.on('connect', this.onConnect.bind(this));\n          this.connection.on('connect', this.onReady.bind(this));\n          this.connection.on('end', this.onClose.bind(this));\n        }\n      }, {\n        key: \"removeAllListeners\",\n        value: function removeAllListeners(event) {\n          switch (event) {\n            case this.SOCKET_MESSAGE:\n              this.connection.removeListener('data', this.onMessage);\n              break;\n            case this.SOCKET_ERROR:\n              this.connection.removeListener('error', this.onError);\n              break;\n            case this.SOCKET_CONNECT:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n            case this.SOCKET_READY:\n              this.connection.removeListener('connect', this.onConnect);\n              break;\n            case this.SOCKET_CLOSE:\n              this.connection.removeListener('end', this.onClose);\n              break;\n          }\n          _get(_getPrototypeOf(MistEthereumProvider.prototype), \"removeAllListeners\", this).call(this, event);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          return true;\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this2 = this;\n          return new Promise(function (resolve, reject) {\n            _this2.connection.send(payload, function (error, response) {\n              _this2.removeAllListeners(payload.id);\n              if (!error) {\n                return resolve(response);\n              }\n              reject(error);\n            });\n          });\n        }\n      }, {\n        key: \"connected\",\n        get: function get() {\n          return this.connection.isConnected();\n        }\n      }]);\n      return MistEthereumProvider;\n    }(AbstractSocketProvider);\n\n    var CustomProvider =\n    function () {\n      function CustomProvider(connection) {\n        _classCallCheck(this, CustomProvider);\n        this.host = 'CustomProvider';\n        this.connection = connection;\n        this.checkConnectionMethods();\n      }\n      _createClass(CustomProvider, [{\n        key: \"supportsSubscriptions\",\n        value: function supportsSubscriptions() {\n          return false;\n        }\n      }, {\n        key: \"checkConnectionMethods\",\n        value: function checkConnectionMethods() {\n          if (this.connection.send || this.connection.sendAsync) {\n            return true;\n          }\n          throw new Error('Invalid provider injected!');\n        }\n      }, {\n        key: \"subscribe\",\n        value: function subscribe() {\n          throw new Error('Subscriptions are not supported with the CustomProvider.');\n        }\n      }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe() {\n          throw new Error('Subscriptions are not supported with the CustomProvider.');\n        }\n      }, {\n        key: \"send\",\n        value: function () {\n          var _send = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(method, parameters) {\n            var response, validationResult;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return this.sendPayload(JsonRpcMapper.toPayload(method, parameters));\n                  case 2:\n                    response = _context.sent;\n                    validationResult = JsonRpcResponseValidator.validate(response);\n                    if (!(validationResult instanceof Error)) {\n                      _context.next = 6;\n                      break;\n                    }\n                    throw validationResult;\n                  case 6:\n                    return _context.abrupt(\"return\", response.result);\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n          function send(_x, _x2) {\n            return _send.apply(this, arguments);\n          }\n          return send;\n        }()\n      }, {\n        key: \"sendBatch\",\n        value: function sendBatch(methods, moduleInstance) {\n          var payload = [];\n          methods.forEach(function (method) {\n            method.beforeExecution(moduleInstance);\n            payload.push(JsonRpcMapper.toPayload(method.rpcMethod, method.parameters));\n          });\n          return this.sendPayload(payload);\n        }\n      }, {\n        key: \"sendPayload\",\n        value: function sendPayload(payload) {\n          var _this = this;\n          return new Promise(function (resolve, reject) {\n            if (_this.connection.sendAsync) {\n              _this.connection.sendAsync(payload, function (error, response) {\n                if (!error) {\n                  resolve(response);\n                }\n                reject(error);\n              });\n              return;\n            }\n            _this.connection.send(payload, function (error, response) {\n              if (!error) {\n                resolve(response);\n              }\n              reject(error);\n            });\n          });\n        }\n      }]);\n      return CustomProvider;\n    }();\n\n    var ProvidersModuleFactory =\n    function () {\n      function ProvidersModuleFactory() {\n        _classCallCheck(this, ProvidersModuleFactory);\n      }\n      _createClass(ProvidersModuleFactory, [{\n        key: \"createBatchRequest\",\n        value: function createBatchRequest(moduleInstance) {\n          return new BatchRequest(moduleInstance);\n        }\n      }, {\n        key: \"createProviderResolver\",\n        value: function createProviderResolver() {\n          return new ProviderResolver(this);\n        }\n      }, {\n        key: \"createHttpProvider\",\n        value: function createHttpProvider(url) {\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new HttpProvider(url, options, this);\n        }\n      }, {\n        key: \"createXMLHttpRequest\",\n        value: function createXMLHttpRequest(host, timeout, headers, agent, withCredentials) {\n          var request;\n          if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n            request = new xhr2Cookies.XMLHttpRequest();\n            request.nodejsSet(agent);\n          } else {\n            request = new XMLHttpRequest();\n          }\n          request.open('POST', host, true);\n          request.setRequestHeader('Content-Type', 'application/json');\n          request.timeout = timeout;\n          request.withCredentials = withCredentials;\n          if (headers) {\n            headers.forEach(function (header) {\n              request.setRequestHeader(header.name, header.value);\n            });\n          }\n          return request;\n        }\n      }, {\n        key: \"createWebsocketProvider\",\n        value: function createWebsocketProvider(url) {\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var connection = '';\n          if (typeof process !== 'undefined' && process.versions != null && process.versions.node != null) {\n            var headers = options.headers || {};\n            var urlObject = new URL(url);\n            if (!headers.authorization && urlObject.username && urlObject.password) {\n              var authToken = Buffer.from(\"\".concat(urlObject.username, \":\").concat(urlObject.password)).toString('base64');\n              headers.authorization = \"Basic \".concat(authToken);\n            }\n            connection = new websocket.w3cwebsocket(url, options.protocol, null, headers, null, options.clientConfig);\n          } else {\n            connection = new window.WebSocket(url, options.protocol);\n          }\n          return new WebsocketProvider(connection, options.timeout);\n        }\n      }, {\n        key: \"createIpcProvider\",\n        value: function createIpcProvider(path, net) {\n          return new IpcProvider(net.connect({\n            path: path\n          }), path);\n        }\n      }, {\n        key: \"createWeb3EthereumProvider\",\n        value: function createWeb3EthereumProvider(connection) {\n          return new Web3EthereumProvider(connection);\n        }\n      }, {\n        key: \"createMetamaskProvider\",\n        value: function createMetamaskProvider(inpageProvider) {\n          return new MetamaskProvider(inpageProvider);\n        }\n      }, {\n        key: \"createMistEthereumProvider\",\n        value: function createMistEthereumProvider(mistEthereumProvider) {\n          return new MistEthereumProvider(mistEthereumProvider);\n        }\n      }, {\n        key: \"createCustomProvider\",\n        value: function createCustomProvider(connection) {\n          return new CustomProvider(connection);\n        }\n      }]);\n      return ProvidersModuleFactory;\n    }();\n\n    var global$1 = function () {\n      return this || (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self;\n    }() || new Function('return this')();\n    var ProviderDetector =\n    function () {\n      function ProviderDetector() {\n        _classCallCheck(this, ProviderDetector);\n      }\n      _createClass(ProviderDetector, null, [{\n        key: \"detect\",\n        value: function detect() {\n          if (typeof global$1.ethereumProvider !== 'undefined' && global$1.ethereumProvider.constructor.name === 'EthereumProvider') {\n            return global$1.ethereumProvider;\n          }\n          if (typeof global$1.web3 !== 'undefined' && global$1.web3.currentProvider) {\n            return global$1.web3.currentProvider;\n          }\n          return null;\n        }\n      }]);\n      return ProviderDetector;\n    }();\n\n    function HttpProvider$1(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new ProvidersModuleFactory().createHttpProvider(url, options);\n    }\n    function WebsocketProvider$1(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new ProvidersModuleFactory().createWebsocketProvider(url, options);\n    }\n    function IpcProvider$1(path, net) {\n      return new ProvidersModuleFactory().createIpcProvider(path, net);\n    }\n    function BatchRequest$1(moduleInstance) {\n      return new ProvidersModuleFactory().createBatchRequest(moduleInstance);\n    }\n    function ProviderResolver$1() {\n      return new ProvidersModuleFactory().createProviderResolver();\n    }\n\n    exports.BatchRequest = BatchRequest$1;\n    exports.HttpProvider = HttpProvider$1;\n    exports.IpcProvider = IpcProvider$1;\n    exports.ProviderDetector = ProviderDetector;\n    exports.ProviderResolver = ProviderResolver$1;\n    exports.ProvidersModuleFactory = ProvidersModuleFactory;\n    exports.Web3EthereumProvider = Web3EthereumProvider;\n    exports.WebsocketProvider = WebsocketProvider$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}
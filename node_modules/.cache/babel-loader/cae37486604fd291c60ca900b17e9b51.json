{"ast":null,"code":"import _regeneratorRuntime from\"/home/luc1d/Code/Github/waviii.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/luc1d/Code/Github/waviii.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/luc1d/Code/Github/waviii.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _assertThisInitialized from\"/home/luc1d/Code/Github/waviii.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createClass from\"/home/luc1d/Code/Github/waviii.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/luc1d/Code/Github/waviii.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/luc1d/Code/Github/waviii.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Web3 from\"web3\";import waviiiLogo from\"../assets/img/i3.png\";import waviii from\"./abis/waviii2.json\";import CountUp from\"react-countup\";import{WaveTopBottomLoading}from\"react-loadingg\";import FadeIn from\"react-fade-in\";// reactstrap components\nimport{Card,CardHeader,CardBody,Row,Col}from\"reactstrap\";var Wallet=/*#__PURE__*/function(_React$Component){_inherits(Wallet,_React$Component);var _super=_createSuper(Wallet);_createClass(Wallet,[{key:\"componentWillMount\",value:function(){var _componentWillMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.loadWeb3();case 2:_context.next=4;return this.loadBlockchainData();case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentWillMount(){return _componentWillMount.apply(this,arguments);}return componentWillMount;}()},{key:\"loadWeb3\",value:function(){var _loadWeb=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.ethereum){_context2.next=6;break;}window.web3=new Web3(window.ethereum);_context2.next=4;return window.ethereum.enable();case 4:_context2.next=7;break;case 6:if(window.web3){window.web3=new Web3(window.web3.currentProvider);}else{// window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\nthis.setState({loading:true});this.setState({noEth:true});}case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function loadWeb3(){return _loadWeb.apply(this,arguments);}return loadWeb3;}()},{key:\"loadBlockchainData\",value:function(){var _loadBlockchainData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var web3,accounts,TokenAddress,waviiiToken,balance,transactions;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!this.state.loading){_context3.next=4;break;}return _context3.abrupt(\"return\",false);case 4:web3=window.web3;_context3.next=7;return web3.eth.getAccounts();case 7:accounts=_context3.sent;this.setState({account:accounts[0]});TokenAddress=\"0x9cc6754d16b98a32ec9137df6453ba84597b9965\";// mainnet waviii Token Contract Address\nwaviiiToken=new web3.eth.Contract(waviii.abi,TokenAddress);this.setState({waviiiToken:waviiiToken});_context3.next=14;return waviiiToken.methods.balanceOf(this.state.account).call();case 14:balance=_context3.sent;this.setState({balance:web3.utils.fromWei(balance.toString(),\"Ether\")});_context3.next=18;return Promise.all([waviiiToken.getPastEvents(\"Transfer\",{fromBlock:0,toBlock:\"latest\",filter:{from:this.state.account}}),waviiiToken.getPastEvents(\"Transfer\",{fromBlock:0,toBlock:\"latest\",filter:{to:this.state.account}})]);case 18:transactions=_context3.sent.flat();this.setState({transactions:transactions});// console.log(transactions);\ncase 20:case\"end\":return _context3.stop();}}},_callee3,this);}));function loadBlockchainData(){return _loadBlockchainData.apply(this,arguments);}return loadBlockchainData;}()},{key:\"transfer\",value:function transfer(recipient,amount){var _this2=this;this.state.waviiiToken.methods.transfer(recipient,amount).send({from:this.state.account}).on(\"transactionHash\",function(hash){_this2.setState({loading:true});}).on(\"confirmation\",function(reciept){_this2.setState({loading:false});window.location.reload();});}}]);function Wallet(props){var _this;_classCallCheck(this,Wallet);_this=_super.call(this,props);_this.state={account:\"\",waviiiToken:null,balance:0,transactions:[],loading:undefined};_this.transfer=_this.transfer.bind(_assertThisInitialized(_this));return _this;}_createClass(Wallet,[{key:\"render\",value:function render(){var _this3=this;var content;if(this.state.loading){if(this.state.noEth){content=/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"main\",{role:\"main\",className:\"col-lg-12 d-flex text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content mr-auto ml-auto\",style:{width:\"90%\"}},/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(\"img\",{src:waviiiLogo,width:\"150\",alt:\"waviii Logo\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"waviii\"},/*#__PURE__*/React.createElement(\"strong\",null,/*#__PURE__*/React.createElement(CountUp,{duration:1.7,start:-10,separator:\"\",decimals:2,decimal:\".\",end:this.state.balance}),\" \",\"waviii\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{className:\"mb-3\",onSubmit:function onSubmit(event){event.preventDefault();var recipient=_this3.recipient.value;var amount=window.web3.utils.toWei(_this3.amount.value,\"Ether\");_this3.transfer(recipient,amount);}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{id:\"recipient\",type:\"text\",ref:function ref(input){_this3.recipient=input;},className:\"form-control form-control-lg\",placeholder:\"Recipient Address\",disabled:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{id:\"amount\",type:\"text\",ref:function ref(input){_this3.amount=input;},className:\"form-control form-control-lg\",placeholder:\"Amount\",disabled:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"text\",className:\"btn btn-primary btn-block btn-lg waviii\",disabled:true},/*#__PURE__*/React.createElement(\"strong\",null,\"locked\"))),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Recipient\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"value\")))))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(\"a\",{href:\"https://metamask.io/download.html\",className:\"noEth\"},\"Blockchain browser not detected! Install MetaMask to use waviii.\"),/*#__PURE__*/React.createElement(\"br\",null))))));}else{content=/*#__PURE__*/React.createElement(\"p\",{id:\"loader\",className:\"text-center\"},/*#__PURE__*/React.createElement(WaveTopBottomLoading,null));}}else{content=/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"main\",{role:\"main\",className:\"col-lg-12 d-flex text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content mr-auto ml-auto\",style:{width:\"90%\"}},/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(\"img\",{src:waviiiLogo,width:\"150\",alt:\"waviii Logo\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"waviii\"},/*#__PURE__*/React.createElement(\"strong\",null,/*#__PURE__*/React.createElement(CountUp,{duration:1.7,start:0,separator:\"\",decimals:2,decimal:\".\",end:this.state.balance}),\" \",\"waviii\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{className:\"mb-3\",onSubmit:function onSubmit(event){event.preventDefault();var recipient=_this3.recipient.value;var amount=window.web3.utils.toWei(_this3.amount.value,\"Ether\");_this3.transfer(recipient,amount);}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{id:\"recipient\",type:\"text\",ref:function ref(input){_this3.recipient=input;},className:\"form-control form-control-lg\",placeholder:\"Recipient Address\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{id:\"amount\",type:\"text\",ref:function ref(input){_this3.amount=input;},className:\"form-control form-control-lg\",placeholder:\"Amount\",required:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block btn-lg waviii\"},/*#__PURE__*/React.createElement(\"strong\",null,\"Send\"))),/*#__PURE__*/React.createElement(\"table\",{className:\"table hide\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Recipient\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"value\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.transactions.sort(function(a,b){return a.blockNumber<b.blockNumber;}).map(function(tx,key){return/*#__PURE__*/React.createElement(\"tr\",{key:key},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{className:\"title responsive\",href:\"https://etherscan.io/address/\".concat(tx.hash),target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"span\",{className:\"waviii text-muted\"},tx.returnValues.to))),tx.returnValues.to!==_this3.state.account&&/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"waviii responsive\"},\"-\",/*#__PURE__*/React.createElement(CountUp,{duration:2.7,start:0,separator:\"\",decimals:2,decimal:\".\",end:window.web3.utils.fromWei(tx.returnValues.value.toString(),\"Ether\")}))),tx.returnValues.to===_this3.state.account&&/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"waviii2 responsive\"},\"+\",/*#__PURE__*/React.createElement(CountUp,{duration:2.7,start:0,separator:\"\",decimals:2,decimal:\".\",end:window.web3.utils.fromWei(tx.returnValues.value.toString(),\"Ether\")}))));})))))))));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(CardHeader,{className:\"responsive2\"},/*#__PURE__*/React.createElement(\"a\",{className:\"waviii3 responsive2\",href:\"https://etherscan.io/address/\".concat(this.state.account),target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"span\",null,this.state.account)))),/*#__PURE__*/React.createElement(CardBody,{className:\"all-icons\"},/*#__PURE__*/React.createElement(FadeIn,null,/*#__PURE__*/React.createElement(\"div\",null,content)))))))));}}]);return Wallet;}(React.Component);export default Wallet;","map":{"version":3,"sources":["/home/luc1d/Code/Github/waviii.io/src/views/wallet.js"],"names":["React","Web3","waviiiLogo","waviii","CountUp","WaveTopBottomLoading","FadeIn","Card","CardHeader","CardBody","Row","Col","Wallet","loadWeb3","loadBlockchainData","window","ethereum","web3","enable","currentProvider","setState","loading","noEth","state","eth","getAccounts","accounts","account","TokenAddress","waviiiToken","Contract","abi","methods","balanceOf","call","balance","utils","fromWei","toString","Promise","all","getPastEvents","fromBlock","toBlock","filter","from","to","transactions","flat","recipient","amount","transfer","send","on","hash","reciept","location","reload","props","undefined","bind","content","width","event","preventDefault","value","toWei","input","sort","a","b","blockNumber","map","tx","key","returnValues","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Web3 from \"web3\";\nimport waviiiLogo from \"../assets/img/i3.png\";\nimport waviii from \"./abis/waviii2.json\";\nimport CountUp from \"react-countup\";\nimport { WaveTopBottomLoading } from \"react-loadingg\";\nimport FadeIn from \"react-fade-in\";\n\n// reactstrap components\nimport { Card, CardHeader, CardBody, Row, Col } from \"reactstrap\";\n\nclass Wallet extends React.Component {\n  async componentWillMount() {\n    await this.loadWeb3();\n    await this.loadBlockchainData();\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      // window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\n      this.setState({ loading: true });\n      this.setState({ noEth: true });\n    }\n  }\n\n  async loadBlockchainData() {\n    if (this.state.loading) {\n      return false;\n    } else {\n      const web3 = window.web3;\n      const accounts = await web3.eth.getAccounts();\n      this.setState({ account: accounts[0] });\n      const TokenAddress = \"0x9cc6754d16b98a32ec9137df6453ba84597b9965\"; // mainnet waviii Token Contract Address\n      const waviiiToken = new web3.eth.Contract(waviii.abi, TokenAddress);\n      this.setState({ waviiiToken: waviiiToken });\n      const balance = await waviiiToken.methods\n        .balanceOf(this.state.account)\n        .call();\n      this.setState({\n        balance: web3.utils.fromWei(balance.toString(), \"Ether\"),\n      });\n      const transactions = (\n        await Promise.all([\n          waviiiToken.getPastEvents(\"Transfer\", {\n            fromBlock: 0,\n            toBlock: \"latest\",\n            filter: { from: this.state.account },\n          }),\n          waviiiToken.getPastEvents(\"Transfer\", {\n            fromBlock: 0,\n            toBlock: \"latest\",\n            filter: { to: this.state.account },\n          }),\n        ])\n      ).flat();\n      this.setState({ transactions: transactions });\n      // console.log(transactions);\n    }\n  }\n\n  transfer(recipient, amount) {\n    this.state.waviiiToken.methods\n      .transfer(recipient, amount)\n      .send({ from: this.state.account })\n      .on(\"transactionHash\", (hash) => {\n        this.setState({ loading: true });\n      })\n      .on(\"confirmation\", (reciept) => {\n        this.setState({ loading: false });\n        window.location.reload();\n      });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: \"\",\n      waviiiToken: null,\n      balance: 0,\n      transactions: [],\n      loading: undefined,\n    };\n\n    this.transfer = this.transfer.bind(this);\n  }\n\n  render() {\n    let content;\n    if (this.state.loading) {\n      if (this.state.noEth) {\n        content = (\n          <div className=\"mt-3\">\n            <div className=\"row\">\n              <main role=\"main\" className=\"col-lg-12 d-flex text-center\">\n                <div\n                  className=\"content mr-auto ml-auto\"\n                  style={{ width: \"90%\" }}\n                >\n                  <FadeIn>\n                    <img src={waviiiLogo} width=\"150\" alt=\"waviii Logo\" />\n                  </FadeIn>\n                  <br />\n                  <br />\n                  <FadeIn>\n                    <h1 className=\"waviii\">\n                      <strong>\n                        <CountUp\n                          duration={1.7}\n                          start={-10}\n                          separator=\"\"\n                          decimals={2}\n                          decimal=\".\"\n                          end={this.state.balance}\n                        />{\" \"}\n                        waviii\n                      </strong>\n                    </h1>\n                  </FadeIn>\n                  <div className=\"card mb-4\">\n                    <div className=\"card-body\">\n                      <form\n                        className=\"mb-3\"\n                        onSubmit={(event) => {\n                          event.preventDefault();\n                          const recipient = this.recipient.value;\n                          const amount = window.web3.utils.toWei(\n                            this.amount.value,\n                            \"Ether\"\n                          );\n                          this.transfer(recipient, amount);\n                        }}\n                      >\n                        <div className=\"form-group\">\n                          <input\n                            id=\"recipient\"\n                            type=\"text\"\n                            ref={(input) => {\n                              this.recipient = input;\n                            }}\n                            className=\"form-control form-control-lg\"\n                            placeholder=\"Recipient Address\"\n                            disabled\n                          />\n                        </div>\n                        <div className=\"form-group\">\n                          <input\n                            id=\"amount\"\n                            type=\"text\"\n                            ref={(input) => {\n                              this.amount = input;\n                            }}\n                            className=\"form-control form-control-lg\"\n                            placeholder=\"Amount\"\n                            disabled\n                          />\n                        </div>\n                        <button\n                          type=\"text\"\n                          className=\"btn btn-primary btn-block btn-lg waviii\"\n                          disabled\n                        >\n                          <strong>locked</strong>\n                        </button>\n                      </form>\n\n                      <table className=\"table\">\n                        <thead>\n                          <tr>\n                            <th scope=\"col\">Recipient</th>\n                            <th scope=\"col\">value</th>\n                          </tr>\n                        </thead>\n                      </table>\n                    </div>\n                  </div><br />\n                  <FadeIn>\n                    <a\n                      href=\"https://metamask.io/download.html\"\n                      className=\"noEth\"\n                    >\n                      Blockchain browser not detected! Install MetaMask to use\n                      waviii.\n                    </a><br />\n                  </FadeIn>\n                </div>\n              </main>\n            </div>\n          </div>\n        );\n      } else {\n        content = (\n          <p id=\"loader\" className=\"text-center\">\n            <WaveTopBottomLoading />\n          </p>\n        );\n      }\n    } else {\n      content = (\n        <div className=\"mt-3\">\n          <div className=\"row\">\n            <main role=\"main\" className=\"col-lg-12 d-flex text-center\">\n              <div className=\"content mr-auto ml-auto\" style={{ width: \"90%\" }}>\n                <FadeIn>\n                  <img src={waviiiLogo} width=\"150\" alt=\"waviii Logo\" />\n                </FadeIn>\n                <br />\n                <br />\n                <FadeIn>\n                  <h1 className=\"waviii\">\n                    <strong>\n                      <CountUp\n                        duration={1.7}\n                        start={0}\n                        separator=\"\"\n                        decimals={2}\n                        decimal=\".\"\n                        end={this.state.balance}\n                      />{\" \"}\n                      waviii\n                    </strong>\n                  </h1>\n                </FadeIn>\n                <div className=\"card mb-4\">\n                  <div className=\"card-body\">\n                    <form\n                      className=\"mb-3\"\n                      onSubmit={(event) => {\n                        event.preventDefault();\n                        const recipient = this.recipient.value;\n                        const amount = window.web3.utils.toWei(\n                          this.amount.value,\n                          \"Ether\"\n                        );\n                        this.transfer(recipient, amount);\n                      }}\n                    >\n                      <div className=\"form-group\">\n                        <input\n                          id=\"recipient\"\n                          type=\"text\"\n                          ref={(input) => {\n                            this.recipient = input;\n                          }}\n                          className=\"form-control form-control-lg\"\n                          placeholder=\"Recipient Address\"\n                          required\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <input\n                          id=\"amount\"\n                          type=\"text\"\n                          ref={(input) => {\n                            this.amount = input;\n                          }}\n                          className=\"form-control form-control-lg\"\n                          placeholder=\"Amount\"\n                          required\n                        />\n                      </div>\n                      <button\n                        type=\"submit\"\n                        className=\"btn btn-primary btn-block btn-lg waviii\"\n                      >\n                        <strong>Send</strong>\n                      </button>\n                    </form>\n\n                    <table className=\"table hide\">\n                      <thead>\n                        <tr>\n                          <th scope=\"col\">Recipient</th>\n                          <th scope=\"col\">value</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {this.state.transactions\n                          .sort((a, b) => a.blockNumber < b.blockNumber)\n                          .map((tx, key) => {\n                            return (\n                              <tr key={key}>\n                                <td>\n                                  <a\n                                    className=\"title responsive\"\n                                    href={`https://etherscan.io/address/${tx.hash}`}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                  >\n                                    <span className=\"waviii text-muted\">\n                                      {tx.returnValues.to}\n                                    </span>\n                                  </a>\n                                </td>\n                                {tx.returnValues.to !== this.state.account && (\n                                  <td>\n                                    <span className=\"waviii responsive\">\n                                      -\n                                      <CountUp\n                                        duration={2.7}\n                                        start={0}\n                                        separator=\"\"\n                                        decimals={2}\n                                        decimal=\".\"\n                                        end={window.web3.utils.fromWei(\n                                          tx.returnValues.value.toString(),\n                                          \"Ether\"\n                                        )}\n                                      />\n                                    </span>\n                                  </td>\n                                )}\n                                {tx.returnValues.to === this.state.account && (\n                                  <td>\n                                    <span className=\"waviii2 responsive\">\n                                      +\n                                      <CountUp\n                                        duration={2.7}\n                                        start={0}\n                                        separator=\"\"\n                                        decimals={2}\n                                        decimal=\".\"\n                                        end={window.web3.utils.fromWei(\n                                          tx.returnValues.value.toString(),\n                                          \"Ether\"\n                                        )}\n                                      />\n                                    </span>\n                                  </td>\n                                )}\n                              </tr>\n                            );\n                          })}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </main>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <div className=\"content\">\n          <FadeIn>\n            <Row>\n              <Col md=\"12\">\n                <Card>\n                  <FadeIn>\n                    <CardHeader className=\"responsive2\">\n                      <a\n                        className=\"waviii3 responsive2\"\n                        href={`https://etherscan.io/address/${this.state.account}`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        <span>{this.state.account}</span>\n                      </a>\n                    </CardHeader>\n                  </FadeIn>\n                  <CardBody className=\"all-icons\">\n                    <FadeIn>\n                      <div>{content}</div>\n                    </FadeIn>\n                  </CardBody>\n                </Card>\n              </Col>\n            </Row>\n          </FadeIn>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Wallet;\n"]},"metadata":{},"sourceType":"module"}
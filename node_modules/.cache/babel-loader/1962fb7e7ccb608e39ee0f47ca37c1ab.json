{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('lodash/isFunction'), require('eventemitter3'), require('@babel/runtime/helpers/get')) : typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'lodash/isFunction', 'eventemitter3', '@babel/runtime/helpers/get'], factory) : (global = global || self, factory(global.Web3CoreSubscriptions = {}, global._classCallCheck, global._createClass, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.isFunction, global.EventEmitter, global._get));\n})(this, function (exports, _classCallCheck, _createClass, _possibleConstructorReturn, _getPrototypeOf, _inherits, isFunction, EventEmitter, _get) {\n  'use strict';\n\n  _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n  _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n  _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n  _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n  _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n  isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n  EventEmitter = EventEmitter && EventEmitter.hasOwnProperty('default') ? EventEmitter['default'] : EventEmitter;\n  _get = _get && _get.hasOwnProperty('default') ? _get['default'] : _get;\n\n  var AbstractSubscription = function (_EventEmitter) {\n    _inherits(AbstractSubscription, _EventEmitter);\n\n    function AbstractSubscription(type, method) {\n      var _this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var utils = arguments.length > 3 ? arguments[3] : undefined;\n      var formatters = arguments.length > 4 ? arguments[4] : undefined;\n      var moduleInstance = arguments.length > 5 ? arguments[5] : undefined;\n\n      _classCallCheck(this, AbstractSubscription);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(AbstractSubscription).call(this));\n      _this.type = type;\n      _this.method = method;\n      _this.options = options;\n      _this.utils = utils;\n      _this.formatters = formatters;\n      _this.moduleInstance = moduleInstance;\n      _this.id = null;\n      return _this;\n    }\n\n    _createClass(AbstractSubscription, [{\n      key: \"beforeSubscription\",\n      value: function beforeSubscription(moduleInstance) {}\n    }, {\n      key: \"onNewSubscriptionItem\",\n      value: function onNewSubscriptionItem(subscriptionItem) {\n        return subscriptionItem;\n      }\n    }, {\n      key: \"subscribe\",\n      value: function subscribe(callback) {\n        var _this2 = this;\n\n        this.beforeSubscription(this.moduleInstance);\n        var subscriptionParameters = [];\n\n        if (this.options !== null) {\n          subscriptionParameters = [this.options];\n        }\n\n        this.moduleInstance.currentProvider.subscribe(this.type, this.method, subscriptionParameters).then(function (subscriptionId) {\n          _this2.id = subscriptionId;\n\n          _this2.moduleInstance.currentProvider.once('error', function (error) {\n            _this2.moduleInstance.currentProvider.removeAllListeners(_this2.id);\n\n            if (isFunction(callback)) {\n              callback(error, false);\n              return;\n            }\n\n            _this2.emit('error', error);\n\n            _this2.removeAllListeners();\n          });\n\n          _this2.moduleInstance.currentProvider.on(_this2.id, function (response) {\n            var formattedOutput = _this2.onNewSubscriptionItem(response.result);\n\n            if (isFunction(callback)) {\n              callback(false, formattedOutput);\n              return;\n            }\n\n            _this2.emit('data', formattedOutput);\n          });\n        }).catch(function (error) {\n          if (isFunction(callback)) {\n            callback(error, null);\n            return;\n          }\n\n          _this2.emit('error', error);\n\n          _this2.removeAllListeners();\n        });\n        return this;\n      }\n    }, {\n      key: \"unsubscribe\",\n      value: function unsubscribe(callback) {\n        var _this3 = this;\n\n        return this.moduleInstance.currentProvider.unsubscribe(this.id, this.type.slice(0, 3) + '_unsubscribe').then(function (response) {\n          if (!response) {\n            var error = new Error('Error on unsubscribe!');\n\n            if (isFunction(callback)) {\n              callback(error, null);\n            }\n\n            throw error;\n          }\n\n          _this3.id = null;\n\n          _this3.removeAllListeners('data');\n\n          if (isFunction(callback)) {\n            callback(false, true);\n          }\n\n          return true;\n        });\n      }\n    }]);\n\n    return AbstractSubscription;\n  }(EventEmitter);\n\n  var LogSubscription = function (_AbstractSubscription) {\n    _inherits(LogSubscription, _AbstractSubscription);\n\n    function LogSubscription(options, utils, formatters, moduleInstance, getPastLogsMethod) {\n      var _this;\n\n      _classCallCheck(this, LogSubscription);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(LogSubscription).call(this, 'eth_subscribe', 'logs', options, utils, formatters, moduleInstance));\n      _this.getPastLogsMethod = getPastLogsMethod;\n      return _this;\n    }\n\n    _createClass(LogSubscription, [{\n      key: \"subscribe\",\n      value: function subscribe(callback) {\n        var _this2 = this;\n\n        if (this.options.fromBlock && this.options.fromBlock !== 'latest' || this.options.fromBlock === 0) {\n          this.getPastLogsMethod.parameters = [this.formatters.inputLogFormatter(this.options)];\n          this.getPastLogsMethod.execute().then(function (logs) {\n            logs.forEach(function (log) {\n              var formattedLog = _this2.onNewSubscriptionItem(log);\n\n              if (isFunction(callback)) {\n                callback(false, formattedLog);\n              }\n\n              _this2.emit('data', formattedLog);\n            });\n            delete _this2.options.fromBlock;\n\n            _get(_getPrototypeOf(LogSubscription.prototype), \"subscribe\", _this2).call(_this2, callback);\n          }).catch(function (error) {\n            if (isFunction(callback)) {\n              callback(error, null);\n            }\n\n            _this2.emit('error', error);\n          });\n          return this;\n        }\n\n        _get(_getPrototypeOf(LogSubscription.prototype), \"subscribe\", this).call(this, callback);\n\n        return this;\n      }\n    }, {\n      key: \"onNewSubscriptionItem\",\n      value: function onNewSubscriptionItem(subscriptionItem) {\n        var log = this.formatters.outputLogFormatter(subscriptionItem);\n\n        if (log.removed) {\n          this.emit('changed', log);\n        }\n\n        return log;\n      }\n    }]);\n\n    return LogSubscription;\n  }(AbstractSubscription);\n\n  var NewHeadsSubscription = function (_AbstractSubscription) {\n    _inherits(NewHeadsSubscription, _AbstractSubscription);\n\n    function NewHeadsSubscription(utils, formatters, moduleInstance) {\n      _classCallCheck(this, NewHeadsSubscription);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(NewHeadsSubscription).call(this, 'eth_subscribe', 'newHeads', null, utils, formatters, moduleInstance));\n    }\n\n    _createClass(NewHeadsSubscription, [{\n      key: \"onNewSubscriptionItem\",\n      value: function onNewSubscriptionItem(subscriptionItem) {\n        return this.formatters.outputBlockFormatter(subscriptionItem);\n      }\n    }]);\n\n    return NewHeadsSubscription;\n  }(AbstractSubscription);\n\n  var NewPendingTransactionsSubscription = function (_AbstractSubscription) {\n    _inherits(NewPendingTransactionsSubscription, _AbstractSubscription);\n\n    function NewPendingTransactionsSubscription(utils, formatters, moduleInstance) {\n      _classCallCheck(this, NewPendingTransactionsSubscription);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(NewPendingTransactionsSubscription).call(this, 'eth_subscribe', 'newPendingTransactions', null, utils, formatters, moduleInstance));\n    }\n\n    return NewPendingTransactionsSubscription;\n  }(AbstractSubscription);\n\n  var SyncingSubscription = function (_AbstractSubscription) {\n    _inherits(SyncingSubscription, _AbstractSubscription);\n\n    function SyncingSubscription(utils, formatters, moduleInstance) {\n      var _this;\n\n      _classCallCheck(this, SyncingSubscription);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(SyncingSubscription).call(this, 'eth_subscribe', 'syncing', null, utils, formatters, moduleInstance));\n      _this.isSyncing = null;\n      return _this;\n    }\n\n    _createClass(SyncingSubscription, [{\n      key: \"onNewSubscriptionItem\",\n      value: function onNewSubscriptionItem(subscriptionItem) {\n        var isSyncing = subscriptionItem.result.syncing;\n\n        if (this.isSyncing === null) {\n          this.isSyncing = isSyncing;\n          this.emit('changed', this.isSyncing);\n        }\n\n        if (this.isSyncing === true && isSyncing === false) {\n          this.isSyncing = isSyncing;\n          this.emit('changed', this.isSyncing);\n        }\n\n        if (this.isSyncing === false && isSyncing === true) {\n          this.isSyncing = isSyncing;\n          this.emit('changed', this.isSyncing);\n        }\n\n        return this.formatters.outputSyncingFormatter(subscriptionItem);\n      }\n    }]);\n\n    return SyncingSubscription;\n  }(AbstractSubscription);\n\n  var MessagesSubscription = function (_AbstractSubscription) {\n    _inherits(MessagesSubscription, _AbstractSubscription);\n\n    function MessagesSubscription(options, utils, formatters, moduleInstance) {\n      _classCallCheck(this, MessagesSubscription);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(MessagesSubscription).call(this, 'shh_subscribe', 'messages', options, utils, formatters, moduleInstance));\n    }\n\n    return MessagesSubscription;\n  }(AbstractSubscription);\n\n  exports.AbstractSubscription = AbstractSubscription;\n  exports.LogSubscription = LogSubscription;\n  exports.MessagesSubscription = MessagesSubscription;\n  exports.NewHeadsSubscription = NewHeadsSubscription;\n  exports.NewPendingTransactionsSubscription = NewPendingTransactionsSubscription;\n  exports.SyncingSubscription = SyncingSubscription;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/home/luc1d/Code/Github/waviii.io/node_modules/web3-core-subscriptions/dist/web3-core-subscriptions.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","Web3CoreSubscriptions","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","isFunction","EventEmitter","_get","hasOwnProperty","AbstractSubscription","_EventEmitter","type","method","_this","options","arguments","length","undefined","utils","formatters","moduleInstance","call","id","key","value","beforeSubscription","onNewSubscriptionItem","subscriptionItem","subscribe","callback","_this2","subscriptionParameters","currentProvider","then","subscriptionId","once","error","removeAllListeners","emit","on","response","formattedOutput","result","catch","unsubscribe","_this3","slice","Error","LogSubscription","_AbstractSubscription","getPastLogsMethod","fromBlock","parameters","inputLogFormatter","execute","logs","forEach","log","formattedLog","prototype","outputLogFormatter","removed","NewHeadsSubscription","outputBlockFormatter","NewPendingTransactionsSubscription","SyncingSubscription","isSyncing","syncing","outputSyncingFormatter","MessagesSubscription","Object","defineProperty"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('lodash/isFunction'), require('eventemitter3'), require('@babel/runtime/helpers/get')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'lodash/isFunction', 'eventemitter3', '@babel/runtime/helpers/get'], factory) :\n    (global = global || self, factory(global.Web3CoreSubscriptions = {}, global._classCallCheck, global._createClass, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.isFunction, global.EventEmitter, global._get));\n}(this, function (exports, _classCallCheck, _createClass, _possibleConstructorReturn, _getPrototypeOf, _inherits, isFunction, EventEmitter, _get) { 'use strict';\n\n    _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n    _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n    _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n    _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n    _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n    isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n    EventEmitter = EventEmitter && EventEmitter.hasOwnProperty('default') ? EventEmitter['default'] : EventEmitter;\n    _get = _get && _get.hasOwnProperty('default') ? _get['default'] : _get;\n\n    var AbstractSubscription =\n    function (_EventEmitter) {\n      _inherits(AbstractSubscription, _EventEmitter);\n      function AbstractSubscription(type, method) {\n        var _this;\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var utils = arguments.length > 3 ? arguments[3] : undefined;\n        var formatters = arguments.length > 4 ? arguments[4] : undefined;\n        var moduleInstance = arguments.length > 5 ? arguments[5] : undefined;\n        _classCallCheck(this, AbstractSubscription);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AbstractSubscription).call(this));\n        _this.type = type;\n        _this.method = method;\n        _this.options = options;\n        _this.utils = utils;\n        _this.formatters = formatters;\n        _this.moduleInstance = moduleInstance;\n        _this.id = null;\n        return _this;\n      }\n      _createClass(AbstractSubscription, [{\n        key: \"beforeSubscription\",\n        value: function beforeSubscription(moduleInstance) {}\n      }, {\n        key: \"onNewSubscriptionItem\",\n        value: function onNewSubscriptionItem(subscriptionItem) {\n          return subscriptionItem;\n        }\n      }, {\n        key: \"subscribe\",\n        value: function subscribe(callback) {\n          var _this2 = this;\n          this.beforeSubscription(this.moduleInstance);\n          var subscriptionParameters = [];\n          if (this.options !== null) {\n            subscriptionParameters = [this.options];\n          }\n          this.moduleInstance.currentProvider.subscribe(this.type, this.method, subscriptionParameters).then(function (subscriptionId) {\n            _this2.id = subscriptionId;\n            _this2.moduleInstance.currentProvider.once('error', function (error) {\n              _this2.moduleInstance.currentProvider.removeAllListeners(_this2.id);\n              if (isFunction(callback)) {\n                callback(error, false);\n                return;\n              }\n              _this2.emit('error', error);\n              _this2.removeAllListeners();\n            });\n            _this2.moduleInstance.currentProvider.on(_this2.id, function (response) {\n              var formattedOutput = _this2.onNewSubscriptionItem(response.result);\n              if (isFunction(callback)) {\n                callback(false, formattedOutput);\n                return;\n              }\n              _this2.emit('data', formattedOutput);\n            });\n          }).catch(function (error) {\n            if (isFunction(callback)) {\n              callback(error, null);\n              return;\n            }\n            _this2.emit('error', error);\n            _this2.removeAllListeners();\n          });\n          return this;\n        }\n      }, {\n        key: \"unsubscribe\",\n        value: function unsubscribe(callback) {\n          var _this3 = this;\n          return this.moduleInstance.currentProvider.unsubscribe(this.id, this.type.slice(0, 3) + '_unsubscribe').then(function (response) {\n            if (!response) {\n              var error = new Error('Error on unsubscribe!');\n              if (isFunction(callback)) {\n                callback(error, null);\n              }\n              throw error;\n            }\n            _this3.id = null;\n            _this3.removeAllListeners('data');\n            if (isFunction(callback)) {\n              callback(false, true);\n            }\n            return true;\n          });\n        }\n      }]);\n      return AbstractSubscription;\n    }(EventEmitter);\n\n    var LogSubscription =\n    function (_AbstractSubscription) {\n      _inherits(LogSubscription, _AbstractSubscription);\n      function LogSubscription(options, utils, formatters, moduleInstance, getPastLogsMethod) {\n        var _this;\n        _classCallCheck(this, LogSubscription);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(LogSubscription).call(this, 'eth_subscribe', 'logs', options, utils, formatters, moduleInstance));\n        _this.getPastLogsMethod = getPastLogsMethod;\n        return _this;\n      }\n      _createClass(LogSubscription, [{\n        key: \"subscribe\",\n        value: function subscribe(callback) {\n          var _this2 = this;\n          if (this.options.fromBlock && this.options.fromBlock !== 'latest' || this.options.fromBlock === 0) {\n            this.getPastLogsMethod.parameters = [this.formatters.inputLogFormatter(this.options)];\n            this.getPastLogsMethod.execute().then(function (logs) {\n              logs.forEach(function (log) {\n                var formattedLog = _this2.onNewSubscriptionItem(log);\n                if (isFunction(callback)) {\n                  callback(false, formattedLog);\n                }\n                _this2.emit('data', formattedLog);\n              });\n              delete _this2.options.fromBlock;\n              _get(_getPrototypeOf(LogSubscription.prototype), \"subscribe\", _this2).call(_this2, callback);\n            }).catch(function (error) {\n              if (isFunction(callback)) {\n                callback(error, null);\n              }\n              _this2.emit('error', error);\n            });\n            return this;\n          }\n          _get(_getPrototypeOf(LogSubscription.prototype), \"subscribe\", this).call(this, callback);\n          return this;\n        }\n      }, {\n        key: \"onNewSubscriptionItem\",\n        value: function onNewSubscriptionItem(subscriptionItem) {\n          var log = this.formatters.outputLogFormatter(subscriptionItem);\n          if (log.removed) {\n            this.emit('changed', log);\n          }\n          return log;\n        }\n      }]);\n      return LogSubscription;\n    }(AbstractSubscription);\n\n    var NewHeadsSubscription =\n    function (_AbstractSubscription) {\n      _inherits(NewHeadsSubscription, _AbstractSubscription);\n      function NewHeadsSubscription(utils, formatters, moduleInstance) {\n        _classCallCheck(this, NewHeadsSubscription);\n        return _possibleConstructorReturn(this, _getPrototypeOf(NewHeadsSubscription).call(this, 'eth_subscribe', 'newHeads', null, utils, formatters, moduleInstance));\n      }\n      _createClass(NewHeadsSubscription, [{\n        key: \"onNewSubscriptionItem\",\n        value: function onNewSubscriptionItem(subscriptionItem) {\n          return this.formatters.outputBlockFormatter(subscriptionItem);\n        }\n      }]);\n      return NewHeadsSubscription;\n    }(AbstractSubscription);\n\n    var NewPendingTransactionsSubscription =\n    function (_AbstractSubscription) {\n      _inherits(NewPendingTransactionsSubscription, _AbstractSubscription);\n      function NewPendingTransactionsSubscription(utils, formatters, moduleInstance) {\n        _classCallCheck(this, NewPendingTransactionsSubscription);\n        return _possibleConstructorReturn(this, _getPrototypeOf(NewPendingTransactionsSubscription).call(this, 'eth_subscribe', 'newPendingTransactions', null, utils, formatters, moduleInstance));\n      }\n      return NewPendingTransactionsSubscription;\n    }(AbstractSubscription);\n\n    var SyncingSubscription =\n    function (_AbstractSubscription) {\n      _inherits(SyncingSubscription, _AbstractSubscription);\n      function SyncingSubscription(utils, formatters, moduleInstance) {\n        var _this;\n        _classCallCheck(this, SyncingSubscription);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(SyncingSubscription).call(this, 'eth_subscribe', 'syncing', null, utils, formatters, moduleInstance));\n        _this.isSyncing = null;\n        return _this;\n      }\n      _createClass(SyncingSubscription, [{\n        key: \"onNewSubscriptionItem\",\n        value: function onNewSubscriptionItem(subscriptionItem) {\n          var isSyncing = subscriptionItem.result.syncing;\n          if (this.isSyncing === null) {\n            this.isSyncing = isSyncing;\n            this.emit('changed', this.isSyncing);\n          }\n          if (this.isSyncing === true && isSyncing === false) {\n            this.isSyncing = isSyncing;\n            this.emit('changed', this.isSyncing);\n          }\n          if (this.isSyncing === false && isSyncing === true) {\n            this.isSyncing = isSyncing;\n            this.emit('changed', this.isSyncing);\n          }\n          return this.formatters.outputSyncingFormatter(subscriptionItem);\n        }\n      }]);\n      return SyncingSubscription;\n    }(AbstractSubscription);\n\n    var MessagesSubscription =\n    function (_AbstractSubscription) {\n      _inherits(MessagesSubscription, _AbstractSubscription);\n      function MessagesSubscription(options, utils, formatters, moduleInstance) {\n        _classCallCheck(this, MessagesSubscription);\n        return _possibleConstructorReturn(this, _getPrototypeOf(MessagesSubscription).call(this, 'shh_subscribe', 'messages', options, utils, formatters, moduleInstance));\n      }\n      return MessagesSubscription;\n    }(AbstractSubscription);\n\n    exports.AbstractSubscription = AbstractSubscription;\n    exports.LogSubscription = LogSubscription;\n    exports.MessagesSubscription = MessagesSubscription;\n    exports.NewHeadsSubscription = NewHeadsSubscription;\n    exports.NewPendingTransactionsSubscription = NewPendingTransactionsSubscription;\n    exports.SyncingSubscription = SyncingSubscription;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}